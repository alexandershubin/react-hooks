# React Hooks - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –±–∞–∑–æ–≤—ã–º —Ö—É–∫–∞–º React —Å –∂–∏–≤—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞.

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
npm run dev
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏

### 1. useState Hook
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- –ü—Ä–∏–º–µ—Ä—ã: —Å—á–µ—Ç—á–∏–∫, —Ñ–æ—Ä–º—ã, —Å–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á
- –†–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

### 2. useEffect Hook  
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã: API –∑–∞–ø—Ä–æ—Å—ã, –ø–æ–¥–ø–∏—Å–∫–∏, —Ç–∞–π–º–µ—Ä—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

### 3. useContext Hook
- –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ü—Ä–∏–º–µ—Ä—ã: —Ç–µ–º—ã, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ò–∑–±–µ–∂–∞–Ω–∏–µ prop drilling

### 4. useReducer Hook
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- –ü—Ä–∏–º–µ—Ä—ã: —Ñ–æ—Ä–º—ã, —Å—á–µ—Ç—á–∏–∫–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ useState –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### 5. useRef Hook
- –î–æ—Å—Ç—É–ø –∫ DOM —ç–ª–µ–º–µ–Ω—Ç–∞–º
- –•—Ä–∞–Ω–µ–Ω–∏–µ –º—É—Ç–∏—Ä—É–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏
- –ü—Ä–∏–º–µ—Ä—ã: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–æ–º, —Ç–∞–π–º–µ—Ä—ã, –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è

### 6. useMemo –∏ useCallback Hooks
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏ —Ñ—É–Ω–∫—Ü–∏–π
- –ü—Ä–∏–º–µ—Ä—ã: —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤

### 7. useDeferredValue Hook
- –û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
- –ü—Ä–∏–º–µ—Ä—ã: –ø–æ–∏—Å–∫ –≤ –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–∞—Ö, —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥

### 8. useTransition Hook
- –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ü—Ä–∏–º–µ—Ä—ã: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä isPending –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

### 9. useId Hook
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID
- –ü—Ä–∏–º–µ—Ä—ã: —Ñ–æ—Ä–º—ã, accessibility, SSR-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã

### 10. useSyncExternalStore Hook
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–º–µ—Ä—ã: Browser APIs, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, WebSocket
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

### 11. useInsertionEffect Hook
- –í—Å—Ç–∞–≤–∫–∞ —Å—Ç–∏–ª–µ–π –ø–µ—Ä–µ–¥ layout
- –ü—Ä–∏–º–µ—Ä—ã: CSS-in-JS –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç–∏–ª–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 12. use Hook
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö—É–∫ –¥–ª—è —á—Ç–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã: Promise, Context
- –ú–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —É—Å–ª–æ–≤–Ω–æ

### 13. useOptimistic Hook
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
- –ü—Ä–∏–º–µ—Ä—ã: —á–∞—Ç—ã, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ª–∞–π–∫–∏
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

### 14. useActionState Hook
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ñ–æ—Ä–º
- –ü—Ä–∏–º–µ—Ä—ã: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Server Actions

### 15. useFormStatus Hook
- –°—Ç–∞—Ç—É—Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Ñ–æ—Ä–º—ã
- –ü—Ä–∏–º–µ—Ä—ã: –∫–Ω–æ–ø–∫–∏ submit, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–µ–π

- **‚Üê ‚Üí** : –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–ª–∞–π–¥–∞–º–∏
- **F** : –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
- **Esc** : –í—ã—Ö–æ–¥ –∏–∑ –ø–æ–ª–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- **–ö–ª–∏–∫–∏ –ø–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** : –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–∞–∑–¥–µ–ª—É

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- React 19
- Vite 5 (–±—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –∏ dev-—Å–µ—Ä–≤–µ—Ä)
- JavaScript (JSX)
- CSS

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
react_19/
‚îú‚îÄ‚îÄ index.html              # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ package.json            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ main.jsx           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
    ‚îú‚îÄ‚îÄ App.jsx            # –ö–æ—Ä–Ω–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
    ‚îú‚îÄ‚îÄ index.css          # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
    ‚îî‚îÄ‚îÄ components/        # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
        ‚îú‚îÄ‚îÄ Presentation.jsx         # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
        ‚îú‚îÄ‚îÄ UseStateDemo.jsx         # –î–µ–º–æ useState
        ‚îú‚îÄ‚îÄ UseEffectDemo.jsx        # –î–µ–º–æ useEffect
        ‚îú‚îÄ‚îÄ UseContextDemo.jsx       # –î–µ–º–æ useContext
        ‚îú‚îÄ‚îÄ UseReducerDemo.jsx       # –î–µ–º–æ useReducer
        ‚îú‚îÄ‚îÄ UseRefDemo.jsx           # –î–µ–º–æ useRef
        ‚îú‚îÄ‚îÄ UseMemoCallbackDemo.jsx  # –î–µ–º–æ useMemo/useCallback
        ‚îú‚îÄ‚îÄ UseDeferredValueDemo.jsx # –î–µ–º–æ useDeferredValue
        ‚îú‚îÄ‚îÄ UseTransitionDemo.jsx    # –î–µ–º–æ useTransition
        ‚îú‚îÄ‚îÄ UseIdDemo.jsx            # –î–µ–º–æ useId
        ‚îú‚îÄ‚îÄ UseSyncExternalStoreDemo.jsx # –î–µ–º–æ useSyncExternalStore
        ‚îú‚îÄ‚îÄ UseInsertionEffectDemo.jsx   # –î–µ–º–æ useInsertionEffect
        ‚îú‚îÄ‚îÄ UseDemo.jsx              # –î–µ–º–æ use
        ‚îú‚îÄ‚îÄ UseOptimisticDemo.jsx    # –î–µ–º–æ useOptimistic
        ‚îú‚îÄ‚îÄ UseActionStateDemo.jsx   # –î–µ–º–æ useActionState
        ‚îî‚îÄ‚îÄ UseFormStatusDemo.jsx    # –î–µ–º–æ useFormStatus
```

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ñ–∏–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã**: –í–µ—Å—å –∫–æ–¥ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ú–æ–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –¥–µ–º–æ
- **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è**: –ö–∞–∂–¥—ã–π —Ö—É–∫ –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **Keyboard shortcuts**: –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

## üéØ –¶–µ–ª–∏ –æ–±—É—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –≤—ã –±—É–¥–µ—Ç–µ –∑–Ω–∞—Ç—å:

- –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useState –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- –ö–æ–≥–¥–∞ –∏ –∫–∞–∫ –ø—Ä–∏–º–µ–Ω—è—Ç—å useEffect
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å useContext –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
- –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useReducer –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å useRef –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ DOM –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
- –ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å useMemo –∏ useCallback
- –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useDeferredValue –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
- –ö–∞–∫ –ø—Ä–∏–º–µ–Ω—è—Ç—å useTransition –¥–ª—è –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ö–∞–∫ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID —Å useId
- –ö–∞–∫ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å useSyncExternalStore
- –ö–∞–∫ –≤—Å—Ç–∞–≤–ª—è—Ç—å —Å—Ç–∏–ª–∏ —Å useInsertionEffect –¥–ª—è CSS-in-JS –±–∏–±–ª–∏–æ—Ç–µ–∫
- –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —Ö—É–∫–∞–º–∏
- –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Vite –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –≥–æ—Ä—è—á–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π –º–æ–¥—É–ª–µ–π (HMR). –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ React 19 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JSX.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è React Hooks](https://react.dev/reference/react)
- [React DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/)
- [Hooks FAQ](https://react.dev/reference/react/hooks)

---

# üß† –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useState

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useState

**useState** - —ç—Ç–æ —Ö—É–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```javascript
const [state, setState] = useState(initialValue);
```

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
2. **–í–æ–∑–≤—Ä–∞—Ç –º–∞—Å—Å–∏–≤–∞**: `[—Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è]`
3. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: `setState` –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
4. **–ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä**: –∫–∞–∂–¥—ã–π `setState` –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π —Ä–µ–Ω–¥–µ—Ä

### ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### 1. üïê –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å setState

```javascript
const [count, setCount] = useState(0);

const handleClick = () => {
  setCount(count + 1);
  console.log(count); // ‚ùå –í—ã–≤–µ–¥–µ—Ç —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!
  
  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
  setCount(prevCount => {
    console.log(prevCount); // –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    return prevCount + 1;
  });
};
```

#### 2. üì¶ –ë–∞—Ç—á–∏–Ω–≥ (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞) –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

```javascript
const handleClick = () => {
  setCount(count + 1); // –í—Å–µ —Ç—Ä–∏ –≤—ã–∑–æ–≤–∞
  setCount(count + 1); // –æ–±—ä–µ–¥–∏–Ω—è—Ç—Å—è –≤ –æ–¥–∏–Ω
  setCount(count + 1); // —Ä–µ–Ω–¥–µ—Ä
  // –†–µ–∑—É–ª—å—Ç–∞—Ç: count —É–≤–µ–ª–∏—á–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ 1!
  
  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
  setCount(c => c + 1);
  setCount(c => c + 1);
  setCount(c => c + 1);
  // –†–µ–∑—É–ª—å—Ç–∞—Ç: count —É–≤–µ–ª–∏—á–∏—Ç—Å—è –Ω–∞ 3
};
```

#### 3. üîÑ –ó–∞–º—ã–∫–∞–Ω–∏—è –∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è

```javascript
const [count, setCount] = useState(0);

useEffect(() => {
  const timer = setInterval(() => {
    setCount(count + 1); // ‚ùå count –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç 0!
  }, 1000);
  
  return () => clearInterval(timer);
}, []); // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
useEffect(() => {
  const timer = setInterval(() => {
    setCount(c => c + 1); // –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  }, 1000);
  
  return () => clearInterval(timer);
}, []);
```

#### 4. üèóÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –º–∞—Å—Å–∏–≤–æ–≤

```javascript
const [user, setUser] = useState({ name: 'John', age: 25 });

// ‚ùå –ú—É—Ç–∞—Ü–∏—è - React –Ω–µ –∑–∞–º–µ—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è:
const updateAge = () => {
  user.age = 26;
  setUser(user); // –¢–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç!
};

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç:
const updateAge = () => {
  setUser({ ...user, age: 26 });
  // –∏–ª–∏
  setUser(prev => ({ ...prev, age: 26 }));
};
```

#### 5. ‚ö° –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```javascript
// ‚ùå –§—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ:
const [data, setData] = useState(expensiveCalculation());

// ‚úÖ –§—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑:
const [data, setData] = useState(() => expensiveCalculation());
```

#### 6. üö´ –£—Å–ª–æ–≤–Ω—ã–µ —Ö—É–∫–∏

```javascript
// ‚ùå –ù–µ–ª—å–∑—è –≤—ã–∑—ã–≤–∞—Ç—å —Ö—É–∫–∏ —É—Å–ª–æ–≤–Ω–æ:
if (condition) {
  const [state, setState] = useState(0);
}

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
const [state, setState] = useState(0);
if (condition) {
  // –∏—Å–ø–æ–ª—å–∑—É–µ–º state
}
```

#### 7. üîç Object.is —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

```javascript
const [count, setCount] = useState(0);

// React –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Object.is –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:
setCount(0); // –ï—Å–ª–∏ count —É–∂–µ 0, —Ä–µ–Ω–¥–µ—Ä –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç
setCount(NaN); // NaN === NaN –≤ Object.is, —Ä–µ–Ω–¥–µ—Ä –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç

// –î–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞:
setCount(c => c); // –í—Å–µ–≥–¥–∞ –≤—ã–∑–æ–≤–µ—Ç —Ä–µ–Ω–¥–µ—Ä
```

#### 8. üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏

```javascript
const [bigState, setBigState] = useState({
  users: [],
  posts: [],
  comments: [],
  // ... –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö
});

// ‚ùå –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è –≤–µ—Å—å –æ–±—ä–µ–∫—Ç:
setBigState({ ...bigState, users: newUsers });

// ‚úÖ –õ—É—á—à–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π:
const [users, setUsers] = useState([]);
const [posts, setPosts] = useState([]);
const [comments, setComments] = useState([]);
```

#### 9. üîÑ setState –≤ useEffect

```javascript
const [data, setData] = useState(null);

// ‚ùå –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª:
useEffect(() => {
  if (!data) {
    setData('loaded');
  }
}); // –ù–µ—Ç –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π!

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
useEffect(() => {
  if (!data) {
    setData('loaded');
  }
}, []); // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

#### 10. üîó –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–ø—Å–æ–≤

```javascript
function Component({ userId }) {
  const [user, setUser] = useState(null);
  
  // ‚ùå –ú–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å, –µ—Å–ª–∏ userId –∏–∑–º–µ–Ω–∏–ª—Å—è:
  useEffect(() => {
    fetchUser(userId).then(setUser);
  }, []); // –ü—Ä–æ–ø—É—â–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å!
  
  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
  useEffect(() => {
    fetchUser(userId).then(setUser);
  }, [userId]); // –í–∫–ª—é—á–∞–µ–º userId –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
}
```

### üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üîß –ò—Å–ø–æ–ª—å–∑—É–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –¥–ª—è –∑–∞–≤–∏—Å–∏–º—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **üìö –†–∞–∑–¥–µ–ª—è–π —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–∏  
3. **üöÄ –ò–∑–±–µ–≥–∞–π –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤** –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
4. **‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑—É–π useReducer** –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
5. **üéØ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π** —Å –ø–æ–º–æ—â—å—é useMemo/useCallback –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

> üí™ –≠—Ç–∏ –∑–Ω–∞–Ω–∏—è –ø–æ–º–æ–≥—É—Ç –∏–∑–±–µ–∂–∞—Ç—å –±–∞–≥–æ–≤ –∏ –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π React –∫–æ–¥!

---

# üåä –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useEffect

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useEffect

**useEffect** ‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö. –û–Ω –∑–∞–º–µ–Ω—è–µ—Ç `componentDidMount`, `componentDidUpdate` –∏ `componentWillUnmount` –∏–∑ –∫–ª–∞—Å—Å–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

```javascript
useEffect(() => {
  // –ü–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
  return () => {
    // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ (cleanup)
  };
}, [dependencies]); // –ú–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞** ‚Äî —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
2. **–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** ‚Äî —Å–Ω–∞—á–∞–ª–∞ cleanup, –ø–æ—Ç–æ–º –Ω–æ–≤—ã–π —ç—Ñ—Ñ–µ–∫—Ç
3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚Äî React –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Object.is` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** ‚Äî —ç—Ñ—Ñ–µ–∫—Ç "—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç" –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. üîÑ –¢—Ä–∏ —Ç–∏–ø–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º

```javascript
// 1. –ö–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä - –û–ü–ê–°–ù–û!
useEffect(() => {
  console.log('–ö–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä!');
}); // –ù–µ—Ç –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

// 2. –¢–æ–ª—å–∫–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏/—Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
useEffect(() => {
  console.log('–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ');
  return () => console.log('–†–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ');
}, []); // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

// 3. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
useEffect(() => {
  console.log('count –∏–∑–º–µ–Ω–∏–ª—Å—è:', count);
}, [count]); // –ú–∞—Å—Å–∏–≤ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
```

### 2. üö® –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã

```javascript
// ‚ùå –ë–ï–°–ö–û–ù–ï–ß–ù–´–ô –¶–ò–ö–õ - –∑–∞–±—ã–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
useEffect(() => {
  setData(fetchData()); // –í—ã–∑—ã–≤–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä ‚Üí —ç—Ñ—Ñ–µ–∫—Ç ‚Üí —Ä–µ–Ω–¥–µ—Ä...
});

// ‚ùå –ë–ï–°–ö–û–ù–ï–ß–ù–´–ô –¶–ò–ö–õ - –æ–±—ä–µ–∫—Ç –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
const [user, setUser] = useState({});
useEffect(() => {
  setUser({ ...user, timestamp: Date.now() });
}, [user]); // user –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç!

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
useEffect(() => {
  async function loadData() {
    const result = await fetchData(userId);
    setData(result);
  }
  loadData();
}, [userId]); // –¢–æ–ª—å–∫–æ userId –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
```

### 3. üïê –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–º—ã–∫–∞–Ω–∏—è (Stale Closures)

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - count "–∑–∞–º–æ—Ä–æ–∂–µ–Ω" –≤ –∑–∞–º—ã–∫–∞–Ω–∏–∏
const [count, setCount] = useState(0);
useEffect(() => {
  const timer = setInterval(() => {
    setCount(count + 1); // count –≤—Å–µ–≥–¥–∞ 0!
  }, 1000);
  return () => clearInterval(timer);
}, []); // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

// ‚úÖ –†–ï–®–ï–ù–ò–ï 1 - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
useEffect(() => {
  const timer = setInterval(() => {
    setCount(prev => prev + 1); // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  }, 1000);
  return () => clearInterval(timer);
}, []);

// ‚úÖ –†–ï–®–ï–ù–ò–ï 2 - useRef –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
const countRef = useRef(count);
countRef.current = count;
useEffect(() => {
  const timer = setInterval(() => {
    setCount(countRef.current + 1);
  }, 1000);
  return () => clearInterval(timer);
}, []);
```

### 4. üíß –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

```javascript
// ‚ùå –£–¢–ï–ß–ö–ê –ü–ê–ú–Ø–¢–ò - –Ω–µ –æ—á–∏—Å—Ç–∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫—É
useEffect(() => {
  const subscription = api.subscribe(data => {
    setData(data);
  });
  // –ó–∞–±—ã–ª–∏ return cleanup —Ñ—É–Ω–∫—Ü–∏—é!
}, []);

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –≤—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
useEffect(() => {
  const subscription = api.subscribe(data => {
    setData(data);
  });
  
  return () => {
    subscription.unsubscribe(); // –û—á–∏—â–∞–µ–º –ø–æ–¥–ø–∏—Å–∫—É
  };
}, []);

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –æ—á–∏—Å—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
useEffect(() => {
  const handleResize = () => setWidth(window.innerWidth);
  window.addEventListener('resize', handleResize);
  
  return () => {
    window.removeEventListener('resize', handleResize);
  };
}, []);
```

### 5. üé≠ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –ø—Ä–æ–ø—É—â–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
function UserProfile({ userId }) {
  const [user, setUser] = useState(null);
  
  useEffect(() => {
    fetchUser(userId).then(setUser);
  }, []); // userId –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö!
  
  return <div>{user?.name}</div>;
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
useEffect(() => {
  fetchUser(userId).then(setUser);
}, [userId]);

// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - —Ñ—É–Ω–∫—Ü–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
const fetchUserData = () => {
  return api.getUser(userId);
};

useEffect(() => {
  fetchUserData().then(setUser);
}, [fetchUserData]); // fetchUserData —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä!

// ‚úÖ –†–ï–®–ï–ù–ò–ï - useCallback –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å –≤–Ω—É—Ç—Ä—å
useEffect(() => {
  const fetchUserData = () => api.getUser(userId);
  fetchUserData().then(setUser);
}, [userId]);
```

### 6. üîÄ –°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ (Race Conditions)

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏
useEffect(() => {
  fetchUser(userId).then(user => {
    setUser(user); // –ú–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ –æ—Ç–≤–µ—Ç –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ userId!
  });
}, [userId]);

// ‚úÖ –†–ï–®–ï–ù–ò–ï 1 - —Ñ–ª–∞–≥ –æ—Ç–º–µ–Ω—ã
useEffect(() => {
  let cancelled = false;
  
  fetchUser(userId).then(user => {
    if (!cancelled) {
      setUser(user);
    }
  });
  
  return () => {
    cancelled = true;
  };
}, [userId]);

// ‚úÖ –†–ï–®–ï–ù–ò–ï 2 - AbortController
useEffect(() => {
  const controller = new AbortController();
  
  fetchUser(userId, { signal: controller.signal })
    .then(user => setUser(user))
    .catch(err => {
      if (err.name !== 'AbortError') {
        console.error(err);
      }
    });
  
  return () => controller.abort();
}, [userId]);
```

### 7. üé® –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä
const config = { timeout: 5000, retries: 3 };
useEffect(() => {
  initializeService(config);
}, [config]); // config –≤—Å–µ–≥–¥–∞ –Ω–æ–≤—ã–π!

// ‚úÖ –†–ï–®–ï–ù–ò–ï 1 - –≤—ã–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
const CONFIG = { timeout: 5000, retries: 3 };
useEffect(() => {
  initializeService(CONFIG);
}, []); // CONFIG —Å—Ç–∞–±–∏–ª—å–Ω—ã–π

// ‚úÖ –†–ï–®–ï–ù–ò–ï 2 - useMemo –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
const config = useMemo(() => ({
  timeout: timeout,
  retries: retryCount
}), [timeout, retryCount]);

useEffect(() => {
  initializeService(config);
}, [config]);
```

### 8. üì± –£—Å–ª–æ–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - —É—Å–ª–æ–≤–Ω—ã–π —Ö—É–∫
if (shouldTrack) {
  useEffect(() => {
    analytics.track('page_view');
  }, []);
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - —É—Å–ª–æ–≤–∏–µ –≤–Ω—É—Ç—Ä–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞
useEffect(() => {
  if (shouldTrack) {
    analytics.track('page_view');
  }
}, [shouldTrack]);
```

### 9. üîÑ –≠—Ñ—Ñ–µ–∫—Ç—ã –∏ —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º (Strict Mode)

```javascript
// –í Strict Mode —ç—Ñ—Ñ–µ–∫—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–≤–∞–∂–¥—ã –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!
useEffect(() => {
  console.log('–≠—Ñ—Ñ–µ–∫—Ç'); // –í—ã–≤–µ–¥–µ—Ç—Å—è 2 —Ä–∞–∑–∞ –≤ dev —Ä–µ–∂–∏–º–µ
  
  return () => {
    console.log('–û—á–∏—Å—Ç–∫–∞'); // –¢–æ–∂–µ 2 —Ä–∞–∑–∞
  };
}, []);

// ‚úÖ –ü–∏—à–∏—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏
useEffect(() => {
  const subscription = api.subscribe(handleData);
  return () => subscription.unsubscribe();
}, []); // –ü–æ–¥–ø–∏—Å–∫–∞/–æ—Ç–ø–∏—Å–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—ã–∑–æ–≤–µ
```

### 10. ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π —ç—Ñ—Ñ–µ–∫—Ç
useEffect(() => {
  // –õ–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  fetchUser(userId).then(setUser);
  
  // –õ–æ–≥–∏–∫–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
  analytics.track('page_view', { userId, page });
  
  // –õ–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫
  const sub = websocket.subscribe(userId);
  return () => sub.unsubscribe();
}, [userId, page]); // –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

// ‚úÖ –†–ï–®–ï–ù–ò–ï - —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
useEffect(() => {
  fetchUser(userId).then(setUser);
}, [userId]);

useEffect(() => {
  analytics.track('page_view', { userId, page });
}, [userId, page]);

useEffect(() => {
  const sub = websocket.subscribe(userId);
  return () => sub.unsubscribe();
}, [userId]);
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ESLint –ø—Ä–∞–≤–∏–ª–æ `exhaustive-deps`
2. **üîß –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∑–∞–º—ã–∫–∞–Ω–∏–π
3. **üìö –†–∞–∑–¥–µ–ª—è–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç—ã** –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –≥—Ä—É–ø–ø–∞–º
4. **üßπ –û—á–∏—â–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã** –≤ cleanup —Ñ—É–Ω–∫—Ü–∏–∏
5. **üöÄ –ò–∑–±–µ–≥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –±–µ–∑ useMemo/useCallback
6. **üèÅ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≥–æ–Ω–∫–∏** –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
7. **üß™ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ Strict Mode** –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

> üåü –≠—Ç–∏ –∑–Ω–∞–Ω–∏—è –ø–æ–º–æ–≥—É—Ç –ø–∏—Å–∞—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!

---

# üîÑ –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useReducer

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useReducer

**useReducer** ‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ reducer-—Ñ—É–Ω–∫—Ü–∏—é. –û–Ω –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –∫–æ–≥–¥–∞ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∏–ª–∏ –∫–æ–≥–¥–∞ –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–ª–æ–∂–Ω–∞—è.

```javascript
const [state, dispatch] = useReducer(reducer, initialState);

// Reducer —Ñ—É–Ω–∫—Ü–∏—è
function reducer(state, action) {
  switch (action.type) {
    case 'ACTION_TYPE':
      return { ...state, field: action.payload };
    default:
      return state;
  }
}
```

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ß–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è** ‚Äî reducer –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
2. **–ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
3. **Action –æ–±—ä–µ–∫—Ç—ã** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ä–µ–∫—Ç—ã —Å –ø–æ–ª—è–º–∏ `type` –∏ `payload`
4. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞** ‚Äî –≤—Å—è –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. üé≠ useReducer vs useState

```javascript
// ‚ùå –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å useState
const [user, setUser] = useState({ name: '', email: '', errors: {} });

const updateName = (name) => {
  setUser(prev => ({ ...prev, name }));
};

const updateEmail = (email) => {
  setUser(prev => ({ ...prev, email }));
};

const setError = (field, error) => {
  setUser(prev => ({
    ...prev,
    errors: { ...prev.errors, [field]: error }
  }));
};

// ‚úÖ –ß–∏—â–µ —Å useReducer
const [user, dispatch] = useReducer(userReducer, initialUser);

const updateName = (name) => {
  dispatch({ type: 'SET_FIELD', field: 'name', value: name });
};

const updateEmail = (email) => {
  dispatch({ type: 'SET_FIELD', field: 'email', value: email });
};

const setError = (field, error) => {
  dispatch({ type: 'SET_ERROR', field, error });
};
```

### 2. üèóÔ∏è –ú—É—Ç–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –º—É—Ç–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
function reducer(state, action) {
  switch (action.type) {
    case 'ADD_ITEM':
      state.items.push(action.payload); // –ú—É—Ç–∞—Ü–∏—è!
      return state; // React –Ω–µ –∑–∞–º–µ—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
    default:
      return state;
  }
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç
function reducer(state, action) {
  switch (action.type) {
    case 'ADD_ITEM':
      return {
        ...state,
        items: [...state.items, action.payload]
      };
    default:
      return state;
  }
}
```

### 3. üö´ –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤ reducer

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤ reducer
function reducer(state, action) {
  switch (action.type) {
    case 'SAVE':
      api.saveData(state); // –ü–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç!
      console.log('Saved'); // –ü–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç!
      return { ...state, saved: true };
    default:
      return state;
  }
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤ useEffect
function reducer(state, action) {
  switch (action.type) {
    case 'SAVE':
      return { ...state, saved: true };
    default:
      return state;
  }
}

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
useEffect(() => {
  if (state.saved) {
    api.saveData(state);
    console.log('Saved');
  }
}, [state.saved]);
```

### 4. üì¶ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ñ—É–Ω–∫—Ü–∏–µ–π

```javascript
// ‚ùå –¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
const initialState = expensiveCalculation();
const [state, dispatch] = useReducer(reducer, initialState);

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
function init(initialArg) {
  return expensiveCalculation(initialArg);
}

const [state, dispatch] = useReducer(reducer, initialArg, init);
```

### 5. üéØ Action creators

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –ª–µ–≥–∫–æ –æ—à–∏–±–∏—Ç—å—Å—è —Å —Ç–∏–ø–æ–º
dispatch({ type: 'ADD_ITM', payload: item }); // –û–ø–µ—á–∞—Ç–∫–∞!
dispatch({ type: 'ADD_ITEM', item }); // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ action creators
const addItem = (item) => ({ type: 'ADD_ITEM', payload: item });
const removeItem = (id) => ({ type: 'REMOVE_ITEM', payload: id });

dispatch(addItem(newItem)); // –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∏ —á–∏—Ç–∞–µ–º–æ
dispatch(removeItem(itemId));
```

### 6. üîó Reducer —Å async –ª–æ–≥–∏–∫–æ–π

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - async –≤ reducer –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
async function reducer(state, action) {
  switch (action.type) {
    case 'FETCH':
      const data = await api.fetch(); // –ù–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç!
      return { ...state, data };
    default:
      return state;
  }
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ useEffect
function reducer(state, action) {
  switch (action.type) {
    case 'FETCH_START':
      return { ...state, loading: true };
    case 'FETCH_SUCCESS':
      return { ...state, loading: false, data: action.payload };
    case 'FETCH_ERROR':
      return { ...state, loading: false, error: action.payload };
    default:
      return state;
  }
}

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
useEffect(() => {
  dispatch({ type: 'FETCH_START' });
  api.fetch()
    .then(data => dispatch({ type: 'FETCH_SUCCESS', payload: data }))
    .catch(error => dispatch({ type: 'FETCH_ERROR', payload: error }));
}, []);
```

### 7. üé® –¢–∏–ø–∏–∑–∞—Ü–∏—è actions

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –ª–µ–≥–∫–æ –ø–µ—Ä–µ–ø—É—Ç–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É action
dispatch({ type: 'UPDATE', value: 'test' }); // payload –∏–ª–∏ value?
dispatch({ type: 'UPDATE', data: 'test' }); // –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è
const ACTIONS = {
  UPDATE: 'UPDATE',
  DELETE: 'DELETE',
  RESET: 'RESET'
};

function reducer(state, action) {
  switch (action.type) {
    case ACTIONS.UPDATE:
      return { ...state, value: action.payload };
    case ACTIONS.DELETE:
      return { ...state, value: null };
    case ACTIONS.RESET:
      return initialState;
    default:
      throw new Error(`Unknown action: ${action.type}`);
  }
}
```

### 8. üîÑ –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - —Å–ª–æ–∂–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
function reducer(state, action) {
  switch (action.type) {
    case 'UPDATE_USER_ADDRESS_CITY':
      return {
        ...state,
        user: {
          ...state.user,
          address: {
            ...state.user.address,
            city: action.payload
          }
        }
      };
    default:
      return state;
  }
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É immer –∏–ª–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
import produce from 'immer';

function reducer(state, action) {
  return produce(state, draft => {
    switch (action.type) {
      case 'UPDATE_USER_ADDRESS_CITY':
        draft.user.address.city = action.payload;
        break;
    }
  });
}
```

### 9. üìä Reducer –∫–æ–º–ø–æ–∑–∏—Ü–∏—è

```javascript
// ‚úÖ –†–∞–∑–¥–µ–ª—è–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ reducers –Ω–∞ –ø–æ–¥—Ä–µ–¥—å—é—Å–µ—Ä—ã
function userReducer(state, action) {
  switch (action.type) {
    case 'SET_NAME':
      return { ...state, name: action.payload };
    case 'SET_EMAIL':
      return { ...state, email: action.payload };
    default:
      return state;
  }
}

function errorsReducer(state, action) {
  switch (action.type) {
    case 'SET_ERROR':
      return { ...state, [action.field]: action.error };
    case 'CLEAR_ERRORS':
      return {};
    default:
      return state;
  }
}

function mainReducer(state, action) {
  return {
    user: userReducer(state.user, action),
    errors: errorsReducer(state.errors, action)
  };
}
```

### 10. üé™ useReducer —Å Context

```javascript
// ‚úÖ –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ useReducer —Å Context –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
const StateContext = React.createContext();
const DispatchContext = React.createContext();

function AppProvider({ children }) {
  const [state, dispatch] = useReducer(reducer, initialState);

  return (
    <StateContext.Provider value={state}>
      <DispatchContext.Provider value={dispatch}>
        {children}
      </DispatchContext.Provider>
    </StateContext.Provider>
  );
}

// –í –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
function ChildComponent() {
  const state = useContext(StateContext);
  const dispatch = useContext(DispatchContext);

  return <button onClick={() => dispatch(addItem('test'))}>Add</button>;
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ useReducer** –∫–æ–≥–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–µ –∏–ª–∏ —Å–≤—è–∑–∞–Ω–Ω–æ–µ
2. **üîß –°–æ–∑–¥–∞–≤–∞–π—Ç–µ action creators** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤
3. **üìö –†–∞–∑–¥–µ–ª—è–π—Ç–µ –±–æ–ª—å—à–∏–µ reducers** –Ω–∞ –ø–æ–¥—Ä–µ–¥—å—é—Å–µ—Ä—ã
4. **üöÄ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã** –¥–ª—è —Ç–∏–ø–æ–≤ actions
5. **‚öôÔ∏è –í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ default case** –≤ switch
6. **üß™ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ reducers –æ—Ç–¥–µ–ª—å–Ω–æ** ‚Äî –æ–Ω–∏ —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
7. **üìñ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ actions** –∏ –∏—Ö payload —Å—Ç—Ä—É–∫—Ç—É—Ä—É

> üí™ useReducer –¥–µ–ª–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º!

---

# üéØ –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useRef

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useRef

**useRef** ‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º—É—Ç–∏—Ä—É–µ–º–æ–π —Å—Å—ã–ª–∫–∏, –∫–æ—Ç–æ—Ä–∞—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏ –∏ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏.

```javascript
const ref = useRef(initialValue);
ref.current = newValue; // –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä!
```

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ú—É—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** ‚Äî `ref.current` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –Ω–∞–ø—Ä—è–º—É—é
2. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏
3. **–ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ ref –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É
4. **–î–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö use case** ‚Äî –¥–æ—Å—Ç—É–ø –∫ DOM –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. üé® useRef –¥–ª—è DOM vs –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π

```javascript
// Use case 1: –î–æ—Å—Ç—É–ø –∫ DOM —ç–ª–µ–º–µ–Ω—Ç—É
function InputComponent() {
  const inputRef = useRef(null);

  const focusInput = () => {
    inputRef.current.focus(); // –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ DOM
  };

  return <input ref={inputRef} />;
}

// Use case 2: –•—Ä–∞–Ω–µ–Ω–∏–µ –º—É—Ç–∏—Ä—É–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
function Timer() {
  const intervalRef = useRef(null);

  useEffect(() => {
    intervalRef.current = setInterval(() => {
      console.log('tick');
    }, 1000);

    return () => clearInterval(intervalRef.current);
  }, []);
}
```

### 2. üö® Ref –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –∏–∑–º–µ–Ω–µ–Ω–∏–µ ref –Ω–µ –æ–±–Ω–æ–≤–∏—Ç UI
function Counter() {
  const countRef = useRef(0);

  const increment = () => {
    countRef.current += 1;
    // UI –ù–ï –æ–±–Ω–æ–≤–∏—Ç—Å—è!
  };

  return <div>{countRef.current}</div>; // –í—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç 0
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ useState –¥–ª—è UI
function Counter() {
  const [count, setCount] = useState(0);

  const increment = () => {
    setCount(c => c + 1); // UI –æ–±–Ω–æ–≤–∏—Ç—Å—è
  };

  return <div>{count}</div>;
}

// ‚úÖ –ù–æ ref –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π, –Ω–µ –≤–ª–∏—è—é—â–∏—Ö –Ω–∞ UI
function Counter() {
  const [count, setCount] = useState(0);
  const renderCount = useRef(0);

  useEffect(() => {
    renderCount.current += 1; // –°—á–∏—Ç–∞–µ–º —Ä–µ–Ω–¥–µ—Ä—ã –±–µ–∑ –∏—Ö –≤—ã–∑–æ–≤–∞
  });

  return (
    <div>
      <div>Count: {count}</div>
      <div>Renders: {renderCount.current}</div>
      <button onClick={() => setCount(c => c + 1)}>+</button>
    </div>
  );
}
```

### 3. üïê –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

```javascript
// ‚úÖ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
function usePrevious(value) {
  const ref = useRef();

  useEffect(() => {
    ref.current = value;
  }, [value]);

  return ref.current;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
function Component({ count }) {
  const prevCount = usePrevious(count);

  return (
    <div>
      <div>–¢–µ–∫—É—â–µ–µ: {count}</div>
      <div>–ü—Ä–µ–¥—ã–¥—É—â–µ–µ: {prevCount}</div>
      <div>–ò–∑–º–µ–Ω–µ–Ω–∏–µ: {count - (prevCount || 0)}</div>
    </div>
  );
}
```

### 4. üíß Callback ref –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - useRef –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —É—Å–ª–æ–≤–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–æ–º
function Component({ show }) {
  const ref = useRef(null);

  useEffect(() => {
    if (ref.current) {
      // –ú–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ show
      ref.current.focus();
    }
  }, [show]);

  return show && <input ref={ref} />;
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - callback ref
function Component({ show }) {
  const [inputElement, setInputElement] = useState(null);

  useEffect(() => {
    if (inputElement) {
      inputElement.focus();
    }
  }, [inputElement]);

  return show && <input ref={setInputElement} />;
}
```

### 5. üéØ Ref –≤ –∑–∞–º—ã–∫–∞–Ω–∏—è—Ö

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∑–∞–º—ã–∫–∞–Ω–∏–∏
function Component() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const timer = setInterval(() => {
      console.log(count); // –í—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç 0!
    }, 1000);

    return () => clearInterval(timer);
  }, []); // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

  return <button onClick={() => setCount(c => c + 1)}>+</button>;
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ref –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
function Component() {
  const [count, setCount] = useState(0);
  const countRef = useRef(count);

  useEffect(() => {
    countRef.current = count; // –û–±–Ω–æ–≤–ª—è–µ–º ref –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
  }, [count]);

  useEffect(() => {
    const timer = setInterval(() => {
      console.log(countRef.current); // –ê–∫—Ç—É–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!
    }, 1000);

    return () => clearInterval(timer);
  }, []);

  return <button onClick={() => setCount(c => c + 1)}>+</button>;
}
```

### 6. üîÑ forwardRef –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ ref

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - ref –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
function Input({ ref }) { // ref –Ω–µ –ø–µ—Ä–µ–¥–∞—Å—Ç—Å—è!
  return <input ref={ref} />;
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ forwardRef
const Input = React.forwardRef((props, ref) => {
  return <input ref={ref} {...props} />;
});

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
function Parent() {
  const inputRef = useRef(null);

  return (
    <>
      <Input ref={inputRef} />
      <button onClick={() => inputRef.current.focus()}>
        Focus Input
      </button>
    </>
  );
}
```

### 7. üé™ useImperativeHandle –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ ref API

```javascript
// ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ API —á–µ—Ä–µ–∑ ref
const FancyInput = React.forwardRef((props, ref) => {
  const inputRef = useRef();

  useImperativeHandle(ref, () => ({
    focus: () => {
      inputRef.current.focus();
    },
    clear: () => {
      inputRef.current.value = '';
    },
    getValue: () => {
      return inputRef.current.value;
    }
  }));

  return <input ref={inputRef} {...props} />;
});

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
function Parent() {
  const inputRef = useRef();

  return (
    <>
      <FancyInput ref={inputRef} />
      <button onClick={() => inputRef.current.focus()}>Focus</button>
      <button onClick={() => inputRef.current.clear()}>Clear</button>
      <button onClick={() => alert(inputRef.current.getValue())}>
        Get Value
      </button>
    </>
  );
}
```

### 8. üìä Ref –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–æ–≤ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤

```javascript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞–º–∏
function Component() {
  const [count, setCount] = useState(0);
  const timerRef = useRef(null);

  const startTimer = () => {
    if (timerRef.current) return; // –£–∂–µ –∑–∞–ø—É—â–µ–Ω

    timerRef.current = setInterval(() => {
      setCount(c => c + 1);
    }, 1000);
  };

  const stopTimer = () => {
    if (timerRef.current) {
      clearInterval(timerRef.current);
      timerRef.current = null;
    }
  };

  useEffect(() => {
    return () => stopTimer(); // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  }, []);

  return (
    <div>
      <div>Count: {count}</div>
      <button onClick={startTimer}>Start</button>
      <button onClick={stopTimer}>Stop</button>
    </div>
  );
}
```

### 9. üé≠ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ refs

```javascript
// ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–º refs
function ItemList({ items }) {
  const itemRefs = useRef([]);

  useEffect(() => {
    // –°–±—Ä–æ—Å –º–∞—Å—Å–∏–≤–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ items
    itemRefs.current = itemRefs.current.slice(0, items.length);
  }, [items]);

  const focusItem = (index) => {
    itemRefs.current[index]?.focus();
  };

  return (
    <div>
      {items.map((item, index) => (
        <input
          key={item.id}
          ref={el => itemRefs.current[index] = el}
          defaultValue={item.name}
        />
      ))}
      <button onClick={() => focusItem(0)}>Focus First</button>
    </div>
  );
}
```

### 10. ‚ö†Ô∏è Ref –∏ —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º (Strict Mode)

```javascript
// ‚ö†Ô∏è –í Strict Mode –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –¥–≤–∞–∂–¥—ã
function Component() {
  const mountCount = useRef(0);

  useEffect(() => {
    mountCount.current += 1;
    console.log('Mounted:', mountCount.current);
    // –í dev mode: Mounted: 1, –∑–∞—Ç–µ–º Mounted: 2
  }, []);

  // ‚úÖ –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - ref —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Ä–µ-–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ useRef –¥–ª—è DOM** ‚Äî –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º
2. **üîß –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ useRef –¥–ª—è –º—É—Ç–∏—Ä—É–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π** ‚Äî —Ç–∞–π–º–µ—Ä—ã, –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
3. **üìö –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ref –¥–ª—è UI —Å–æ—Å—Ç–æ—è–Ω–∏—è** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ useState
4. **üöÄ –û—á–∏—â–∞–π—Ç–µ —Ç–∞–π–º–µ—Ä—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã** –≤ cleanup —Ñ—É–Ω–∫—Ü–∏–∏
5. **‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ forwardRef** –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ ref –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
6. **üß™ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ useImperativeHandle** –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ API
7. **üìñ –ü–æ–º–Ω–∏—Ç–µ –æ callback refs** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

> üéØ useRef ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOM –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º—É—Ç–∏—Ä—É–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π!

---

# ‚ö° –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useMemo –∏ useCallback

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç useMemo –∏ useCallback

**useMemo** –∏ **useCallback** ‚Äî —ç—Ç–æ —Ö—É–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –º–µ–º–æ–∏–∑–∞—Ü–∏—é –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏ —Ñ—É–Ω–∫—Ü–∏–π.

```javascript
// useMemo - –º–µ–º–æ–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
const memoizedValue = useMemo(() => expensiveCalculation(a, b), [a, b]);

// useCallback - –º–µ–º–æ–∏–∑–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é
const memoizedCallback = useCallback(() => {
  doSomething(a, b);
}, [a, b]);

// useCallback —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω useMemo –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
const memoizedCallback = useMemo(() => {
  return () => doSomething(a, b);
}, [a, b]);
```

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
2. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚Äî –ø–µ—Ä–µ—Å—á—ë—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ
4. **–°—Å—ã–ª–æ—á–Ω–æ–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç/—Ñ—É–Ω–∫—Ü–∏—é

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. üé≠ –ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

```javascript
// ‚ùå –ò–∑–ª–∏—à–Ω—è—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è - –ø—Ä–æ—Å—Ç—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
function Component({ a, b }) {
  const sum = useMemo(() => a + b, [a, b]); // –ù–µ –Ω—É–∂–Ω–æ!
  const double = useMemo(() => a * 2, [a]); // –ù–µ –Ω—É–∂–Ω–æ!

  return <div>{sum + double}</div>;
}

// ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é
function Component({ a, b }) {
  const sum = a + b; // –ë—ã—Å—Ç—Ä–µ–µ —á–µ–º useMemo
  const double = a * 2;

  return <div>{sum + double}</div>;
}

// ‚úÖ useMemo –Ω—É–∂–µ–Ω –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
function Component({ items }) {
  const expensiveResult = useMemo(() => {
    return items
      .filter(item => item.active)
      .map(item => complexTransformation(item))
      .reduce((acc, val) => acc + val.score, 0);
  }, [items]);

  return <div>{expensiveResult}</div>;
}
```

### 2. üö® –°—Å—ã–ª–æ—á–Ω–æ–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –∏ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
function Parent() {
  const [count, setCount] = useState(0);
  const config = { theme: 'dark', size: 'large' }; // –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç!

  return <Child config={config} />; // Child —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑
}

const Child = React.memo(({ config }) => {
  console.log('Child rendered');
  return <div>{config.theme}</div>;
});

// ‚úÖ –†–ï–®–ï–ù–ò–ï - useMemo –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤
function Parent() {
  const [count, setCount] = useState(0);
  const config = useMemo(
    () => ({ theme: 'dark', size: 'large' }),
    [] // –°–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
  );

  return <Child config={config} />; // Child –Ω–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
}
```

### 3. üéØ useCallback –¥–ª—è —Å–æ–±—ã—Ç–∏–π

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
function Parent() {
  const [count, setCount] = useState(0);

  const handleClick = () => { // –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è!
    console.log('clicked');
  };

  return <Child onClick={handleClick} />; // Child —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
}

const Child = React.memo(({ onClick }) => {
  console.log('Child rendered');
  return <button onClick={onClick}>Click</button>;
});

// ‚úÖ –†–ï–®–ï–ù–ò–ï - useCallback
function Parent() {
  const [count, setCount] = useState(0);

  const handleClick = useCallback(() => {
    console.log('clicked');
  }, []); // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑

  return <Child onClick={handleClick} />; // Child –Ω–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
}
```

### 4. üíß –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ useMemo/useCallback

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∑–∞–º—ã–∫–∞–Ω–∏–∏
function Component() {
  const [count, setCount] = useState(0);
  const [items, setItems] = useState([]);

  const addItem = useCallback(() => {
    setItems([...items, count]); // items –≤—Å–µ–≥–¥–∞ –ø—É—Å—Ç–æ–π!
  }, []); // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

  return <button onClick={addItem}>Add</button>;
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï 1 - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
function Component() {
  const [count, setCount] = useState(0);
  const [items, setItems] = useState([]);

  const addItem = useCallback(() => {
    setItems([...items, count]);
  }, [items, count]); // –í–∫–ª—é—á–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

  return <button onClick={addItem}>Add</button>;
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï 2 - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–ª—É—á—à–µ)
function Component() {
  const [count, setCount] = useState(0);
  const [items, setItems] = useState([]);

  const addItem = useCallback(() => {
    setItems(prev => [...prev, count]);
  }, [count]); // –¢–æ–ª—å–∫–æ count –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö

  return <button onClick={addItem}>Add</button>;
}
```

### 5. üîÑ useMemo –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π useEffect

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - useEffect —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
function Component({ userId }) {
  const options = { timeout: 5000, retry: 3 };

  useEffect(() => {
    fetchUser(userId, options);
  }, [userId, options]); // options –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–æ–≤—ã–π!
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - useMemo –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
function Component({ userId }) {
  const options = useMemo(
    () => ({ timeout: 5000, retry: 3 }),
    [] // –°—Ç–∞–±–∏–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç
  );

  useEffect(() => {
    fetchUser(userId, options);
  }, [userId, options]); // –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ userId
}
```

### 6. üé® –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –º–µ–º–æ–∏–∑–∞—Ü–∏—è

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ useMemo/useCallback
function Component({ data }) {
  const value1 = useMemo(() => data.a, [data.a]);
  const value2 = useMemo(() => data.b, [data.b]);
  const value3 = useMemo(() => data.c, [data.c]);

  const fn1 = useCallback(() => console.log(value1), [value1]);
  const fn2 = useCallback(() => console.log(value2), [value2]);
  const fn3 = useCallback(() => console.log(value3), [value3]);

  // –ö–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω–µ–µ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –ø–æ–ª—å–∑—ã
}

// ‚úÖ –ü–†–ê–í–ò–õ–û - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∏–∑–º–µ—Ä–∏–º–æ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
function Component({ data }) {
  // –ü—Ä–æ—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏
  const value1 = data.a;
  const value2 = data.b;

  // –ú–µ–º–æ–∏–∑–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Ç—è–∂—ë–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
  const expensiveValue = useMemo(() => {
    return heavyCalculation(data);
  }, [data]);

  // –ú–µ–º–æ–∏–∑–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö React.memo –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  const handleSubmit = useCallback(() => {
    submitData(expensiveValue);
  }, [expensiveValue]);

  return <MemoizedChild onSubmit={handleSubmit} />;
}
```

### 7. üìä React.memo vs useMemo

```javascript
// React.memo - –º–µ–º–æ–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Å—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
const Child = React.memo(({ value }) => {
  console.log('Child rendered');
  return <div>{value}</div>;
});

// useMemo - –º–µ–º–æ–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
function Parent() {
  const [count, setCount] = useState(0);

  const child = useMemo(() => {
    return <div>{count}</div>; // –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
  }, [count]);

  return child;
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ React.memo –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
function Parent() {
  const [count, setCount] = useState(0);
  const [unrelated, setUnrelated] = useState(0);

  return (
    <>
      <Child value={count} /> {/* –†–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ count */}
      <button onClick={() => setUnrelated(u => u + 1)}>
        Update Unrelated
      </button>
    </>
  );
}

const Child = React.memo(({ value }) => {
  console.log('Child rendered');
  return <div>{value}</div>;
});
```

### 8. üé™ useMemo –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –≤—Å–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è
function Provider({ children }) {
  const [user, setUser] = useState(null);
  const [theme, setTheme] = useState('light');

  const value = { user, setUser, theme, setTheme }; // –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç!

  return (
    <Context.Provider value={value}>
      {children}
    </Context.Provider>
  );
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - useMemo –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
function Provider({ children }) {
  const [user, setUser] = useState(null);
  const [theme, setTheme] = useState('light');

  const value = useMemo(
    () => ({ user, setUser, theme, setTheme }),
    [user, theme] // setUser –∏ setTheme —Å—Ç–∞–±–∏–ª—å–Ω—ã
  );

  return (
    <Context.Provider value={value}>
      {children}
    </Context.Provider>
  );
}

// ‚úÖ –ï–©–Å –õ–£–ß–®–ï - —Ä–∞–∑–¥–µ–ª–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
function Provider({ children }) {
  const [user, setUser] = useState(null);
  const [theme, setTheme] = useState('light');

  const userValue = useMemo(() => ({ user, setUser }), [user]);
  const themeValue = useMemo(() => ({ theme, setTheme }), [theme]);

  return (
    <UserContext.Provider value={userValue}>
      <ThemeContext.Provider value={themeValue}>
        {children}
      </ThemeContext.Provider>
    </UserContext.Provider>
  );
}
```

### 9. ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏–∏

```javascript
// ‚ö†Ô∏è useMemo/useCallback –∏–º–µ—é—Ç —Å–≤–æ—é —Å—Ç–æ–∏–º–æ—Å—Ç—å
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∏–∑–º–µ—Ä–∏–º–æ –ø–æ–º–æ–≥–∞–µ—Ç

// ‚ùå –ù–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç - –ø—Ä–∏–º–∏—Ç–∏–≤—ã –±—ã—Å—Ç—Ä–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è
const value = useMemo(() => props.value, [props.value]);

// ‚ùå –ù–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç - —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—ã—Å—Ç—Ä–µ–µ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏
const fn = useCallback(() => {}, []);

// ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç - —Ç—è–∂—ë–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
const result = useMemo(() => {
  let sum = 0;
  for (let i = 0; i < 1000000; i++) {
    sum += complexCalculation(data[i]);
  }
  return sum;
}, [data]);

// ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ä–µ-—Ä–µ–Ω–¥–µ—Ä –¥–æ—á–µ—Ä–Ω–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
const handleClick = useCallback(() => {
  doSomething();
}, []);

return <ExpensiveMemoizedChild onClick={handleClick} />;
```

### 10. üîç –û—Ç–ª–∞–¥–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```javascript
// ‚úÖ –•—É–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
function useWhyDidYouUpdate(name, props) {
  const previousProps = useRef();

  useEffect(() => {
    if (previousProps.current) {
      const allKeys = Object.keys({ ...previousProps.current, ...props });
      const changes = {};

      allKeys.forEach(key => {
        if (previousProps.current[key] !== props[key]) {
          changes[key] = {
            from: previousProps.current[key],
            to: props[key]
          };
        }
      });

      if (Object.keys(changes).length) {
        console.log('[why-did-you-update]', name, changes);
      }
    }

    previousProps.current = props;
  });
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
function Component({ value, onClick }) {
  useWhyDidYouUpdate('Component', { value, onClick });
  return <div>{value}</div>;
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –ò–∑–º–µ—Ä—è–π—Ç–µ –ø–µ—Ä–µ–¥ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ React DevTools Profiler
2. **üîß useMemo –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π** ‚Äî –Ω–µ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. **üìö useCallback –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π** ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è React.memo –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. **üöÄ –í–∫–ª—é—á–∞–π—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ESLint –ø—Ä–∞–≤–∏–ª–æ exhaustive-deps
5. **‚öôÔ∏è –†–∞–∑–¥–µ–ª—è–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã** ‚Äî –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤
6. **üß™ React.memo –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** ‚Äî useMemo –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π
7. **üìñ –ù–µ –ø–µ—Ä–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ** ‚Äî —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

> ‚ö° useMemo –∏ useCallback ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–æ—á–µ—á–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –Ω–µ –ø–∞–Ω–∞—Ü–µ—è!

---

**üéâ –¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ –≤—Å–µ –æ–¥–∏–Ω–Ω–∞–¥—Ü–∞—Ç—å —Ö—É–∫–æ–≤ React 19!**

---

# üöÄ –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useDeferredValue

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useDeferredValue

**useDeferredValue** ‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–∞—Å—Ç–∏ UI, –ø–æ–∑–≤–æ–ª—è—è –±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º.

```javascript
const deferredValue = useDeferredValue(value);
```

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** ‚Äî –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
2. **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Äî —Å—Ä–æ—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
3. **isStale –ø—Ä–æ–≤–µ—Ä–∫–∞** ‚Äî –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —É—Å—Ç–∞—Ä–µ–ª–æ –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ
4. **Concurrent rendering** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ React 18+

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. üé≠ useDeferredValue vs useTransition

```javascript
// useDeferredValue - –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è
function Component({ searchQuery }) {
  const deferredQuery = useDeferredValue(searchQuery);

  return <SlowList query={deferredQuery} />;
}

// useTransition - –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è
function Component() {
  const [isPending, startTransition] = useTransition();
  const [searchQuery, setSearchQuery] = useState('');

  const handleChange = (e) => {
    startTransition(() => {
      setSearchQuery(e.target.value);
    });
  };

  return <input onChange={handleChange} />;
}
```

### 2. ‚ö° –†–∞–±–æ—Ç–∞ —Å React.memo

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
function SearchResults({ query }) {
  const deferredQuery = useDeferredValue(query);
  // –†–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ query
  return <ExpensiveList query={deferredQuery} />;
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ React.memo
const ExpensiveList = React.memo(({ query }) => {
  const items = useMemo(() => {
    return data.filter(item => item.name.includes(query));
  }, [query]);

  return items.map(item => <Item key={item.id} {...item} />);
});

function SearchResults({ query }) {
  const deferredQuery = useDeferredValue(query);
  return <ExpensiveList query={deferredQuery} />;
}
```

### 3. üîÑ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è

```javascript
function Component({ value }) {
  const deferredValue = useDeferredValue(value);
  const isStale = value !== deferredValue;

  return (
    <div style={{ opacity: isStale ? 0.5 : 1 }}>
      {isStale && <Spinner />}
      <SlowComponent value={deferredValue} />
    </div>
  );
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –ø–æ–∏—Å–∫–∞/—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏** ‚Äî –æ—Ç–ª–æ–∂–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
2. **üîß –ö–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ —Å React.memo** ‚Äî –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
3. **üìö –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ isStale –¥–ª—è feedback
4. **üöÄ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è UI –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

> üí™ useDeferredValue –¥–µ–ª–∞–µ—Ç UI –æ—Ç–∑—ã–≤—á–∏–≤—ã–º –ø—Ä–∏ —Ç—è–∂—ë–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö!

---

# üé® –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useTransition

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useTransition

**useTransition** ‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è –ø–æ–º–µ—Ç–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–∫ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö (–Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö), —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –∑–∞–≥—Ä—É–∑–∫–∏.

```javascript
const [isPending, startTransition] = useTransition();

startTransition(() => {
  setState(newValue); // –ù–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
});
```

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **isPending** ‚Äî –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è transition
2. **–ü—Ä–µ—Ä—ã–≤–∞–µ–º–æ—Å—Ç—å** ‚Äî transitions –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ—Ä–≤–∞–Ω—ã –±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
3. **–ë–∞—Ç—á–∏–Ω–≥** ‚Äî –≤—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ startTransition –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è
4. **Concurrent rendering** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ React 18+

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. üé≠ useTransition vs useDeferredValue

```javascript
// useTransition - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç–µ –Ω–∞—á–∞–ª–æ transition
function TabContainer() {
  const [tab, setTab] = useState('home');
  const [isPending, startTransition] = useTransition();

  const selectTab = (newTab) => {
    startTransition(() => {
      setTab(newTab); // –£–ø—Ä–∞–≤–ª—è–µ—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
    });
  };

  return (
    <>
      {isPending && <Spinner />}
      <Tabs onSelect={selectTab} />
      <TabContent tab={tab} />
    </>
  );
}

// useDeferredValue - –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
function TabContainer({ selectedTab }) {
  const deferredTab = useDeferredValue(selectedTab);

  return <TabContent tab={deferredTab} />;
}
```

### 2. üö® –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ transition

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - async —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
startTransition(async () => {
  await fetchData(); // –ù–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç!
  setState(data);
});

// ‚úÖ –†–ï–®–ï–ù–ò–ï - —Å–Ω–∞—á–∞–ª–∞ fetch, –ø–æ—Ç–æ–º transition
async function handleClick() {
  const data = await fetchData();

  startTransition(() => {
    setState(data);
  });
}
```

### 3. ‚ö° –í–ª–æ–∂–µ–Ω–Ω—ã–µ transitions

```javascript
// ‚úÖ –í–ª–æ–∂–µ–Ω–Ω—ã–µ transitions —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
function Component() {
  const [isPending, startTransition] = useTransition();

  const handleUpdate = () => {
    startTransition(() => {
      setState1(value1);

      // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π transition
      startTransition(() => {
        setState2(value2);
      });
    });
  };
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** ‚Äî –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
2. **üîß –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ isPending** ‚Äî –¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é feedback
3. **üìö –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** ‚Äî –≤ –æ–¥–∏–Ω startTransition
4. **üöÄ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Ñ–æ—Ä–º** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

> üé® useTransition –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∑—ã–≤—á–∏–≤—ã–º –ø—Ä–∏ —Ç—è–∂—ë–ª—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö!

---

# üÜî –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useId

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useId

**useId** ‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID, —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –¥–ª—è SSR.

```javascript
const id = useId();
```

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** ‚Äî ID —É–Ω–∏–∫–∞–ª–µ–Ω –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
2. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** ‚Äî –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏
3. **SSR-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π ID –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –∫–ª–∏–µ–Ω—Ç–µ
4. **–ù–µ –¥–ª—è key** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è accessibility, –Ω–µ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. üé≠ useId vs Math.random()

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - ID –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
function Component() {
  const id = `field-${Math.random()}`;
  return <input id={id} />;
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - useId —Å—Ç–∞–±–∏–ª–µ–Ω
function Component() {
  const id = useId();
  return <input id={id} />;
}
```

### 2. üîÑ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –æ–¥–Ω–∏–º useId

```javascript
// ‚úÖ –ë–∞–∑–æ–≤—ã–π ID —Å —Å—É—Ñ—Ñ–∏–∫—Å–∞–º–∏
function RadioGroup() {
  const id = useId();

  return (
    <>
      <input type="radio" id={`${id}-option-1`} name={id} />
      <label htmlFor={`${id}-option-1`}>Option 1</label>

      <input type="radio" id={`${id}-option-2`} name={id} />
      <label htmlFor={`${id}-option-2`}>Option 2</label>
    </>
  );
}
```

### 3. ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è key prop

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - useId –Ω–µ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤
function List({ items }) {
  return items.map(item => {
    const id = useId(); // –ù–ï –î–ï–õ–ê–ô–¢–ï –¢–ê–ö!
    return <li key={id}>{item}</li>;
  });
}

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∫–ª—é—á
function List({ items }) {
  return items.map(item => (
    <li key={item.id}>{item}</li>
  ));
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è accessibility** ‚Äî aria-labelledby, aria-describedby
2. **üîß –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Ñ–æ—Ä–º** ‚Äî —Å–≤—è–∑—å label –∏ input
3. **üìö –î–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã** ‚Äî –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
4. **üöÄ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è key** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è ID –∞—Ç—Ä–∏–±—É—Ç–æ–≤

> üÜî useId –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã!

---

# üîå –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useSyncExternalStore

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useSyncExternalStore

**useSyncExternalStore** ‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏.

```javascript
const value = useSyncExternalStore(
  subscribe,    // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
  getSnapshot,  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
  getServerSnapshot // –î–ª—è SSR (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
);
```

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ü–æ–¥–ø–∏—Å–∫–∞** ‚Äî subscribe –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
2. **–°–Ω–∞–ø—à–æ—Ç—ã** ‚Äî getSnapshot –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
3. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** ‚Äî React –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ
4. **SSR –ø–æ–¥–¥–µ—Ä–∂–∫–∞** ‚Äî getServerSnapshot –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. üé≠ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è subscribe

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç cleanup
const store = {
  subscribe(listener) {
    window.addEventListener('storage', listener);
    // –ó–∞–±—ã–ª–∏ return!
  }
};

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø–∏—Å–∫–∏
const store = {
  subscribe(listener) {
    window.addEventListener('storage', listener);
    return () => {
      window.removeEventListener('storage', listener);
    };
  }
};
```

### 2. üîÑ –ù–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å getSnapshot

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –∫–∞–∂–¥—ã–π —Ä–∞–∑
const store = {
  getSnapshot() {
    return { value: window.innerWidth }; // –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç!
  }
};

// ‚úÖ –†–ï–®–ï–ù–ò–ï - –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
const store = {
  value: window.innerWidth,

  getSnapshot() {
    return this.value; // –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  },

  subscribe(listener) {
    const handler = () => {
      this.value = window.innerWidth;
      listener();
    };
    window.addEventListener('resize', handler);
    return () => window.removeEventListener('resize', handler);
  }
};
```

### 3. ‚ö° SSR –∏ getServerSnapshot

```javascript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SSR
function useWindowWidth() {
  return useSyncExternalStore(
    (listener) => {
      window.addEventListener('resize', listener);
      return () => window.removeEventListener('resize', listener);
    },
    () => window.innerWidth,
    () => 1024 // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è SSR
  );
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è Browser APIs** ‚Äî navigator.onLine, matchMedia
2. **üîß –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫** ‚Äî Redux, MobX, Zustand
3. **üìö –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ cleanup** ‚Äî –∏–∑ subscribe —Ñ—É–Ω–∫—Ü–∏–∏
4. **üöÄ –ö—ç—à–∏—Ä—É–π—Ç–µ —Å–Ω–∞–ø—à–æ—Ç—ã** ‚Äî –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

> üîå useSyncExternalStore –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ!

---

# üíâ –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ useInsertionEffect

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useInsertionEffect

**useInsertionEffect** ‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ —Å—Ç–∏–ª–µ–π –≤ DOM –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ layout —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏. –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤ CSS-in-JS –±–∏–±–ª–∏–æ—Ç–µ–∫.

```javascript
useInsertionEffect(() => {
  // –í—Å—Ç–∞–≤–∫–∞ —Å—Ç–∏–ª–µ–π
  const styleTag = document.createElement('style');
  styleTag.textContent = css;
  document.head.appendChild(styleTag);

  return () => {
    // Cleanup
  };
}, [dependencies]);
```

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** ‚Äî –¥–æ useLayoutEffect –∏ useEffect
2. **–¢–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∏–ª–µ–π** ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –¥—Ä—É–≥–æ–π –ª–æ–≥–∏–∫–∏
3. **–î–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫** ‚Äî –æ–±—ã—á–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useEffect
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç layout thrashing

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. üé≠ –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ö—É–∫–æ–≤

```javascript
function Component() {
  useInsertionEffect(() => {
    console.log('1. useInsertionEffect'); // –ü–µ—Ä–≤—ã–π
  });

  useLayoutEffect(() => {
    console.log('2. useLayoutEffect'); // –í—Ç–æ—Ä–æ–π
  });

  useEffect(() => {
    console.log('3. useEffect'); // –¢—Ä–µ—Ç–∏–π
  });
}
```

### 2. ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –Ω–µ–ª—å–∑—è –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
useInsertionEffect(() => {
  setState(value); // –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
});

// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ refs
useInsertionEffect(() => {
  console.log(ref.current); // undefined!
});

// ‚úÖ –†–ï–®–ï–ù–ò–ï - —Ç–æ–ª—å–∫–æ –≤—Å—Ç–∞–≤–∫–∞ —Å—Ç–∏–ª–µ–π
useInsertionEffect(() => {
  const style = document.createElement('style');
  style.textContent = `.class { color: red; }`;
  document.head.appendChild(style);

  return () => style.remove();
});
```

### 3. üé® –ü—Ä–∏–º–µ—Ä CSS-in-JS –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```javascript
// ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–æ–π CSS-in-JS –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
function useCSS(css) {
  const id = useId();

  useInsertionEffect(() => {
    let styleTag = document.getElementById(id);

    if (!styleTag) {
      styleTag = document.createElement('style');
      styleTag.id = id;
      document.head.appendChild(styleTag);
    }

    styleTag.textContent = css;

    return () => {
      styleTag.remove();
    };
  }, [css, id]);

  return id;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
function Button() {
  useCSS(`
    .my-button {
      background: blue;
      padding: 10px;
    }
  `);

  return <button className="my-button">Click</button>;
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –¢–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤ –±–∏–±–ª–∏–æ—Ç–µ–∫** ‚Äî –Ω–µ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
2. **üîß –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è CSS** ‚Äî –Ω–µ –¥–ª—è –¥—Ä—É–≥–æ–π –ª–æ–≥–∏–∫–∏
3. **üìö –û—á–∏—â–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã** ‚Äî —É–¥–∞–ª—è–π—Ç–µ style tags –≤ cleanup
4. **üöÄ –ù–µ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** ‚Äî —Ç–æ–ª—å–∫–æ DOM –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏

> üíâ useInsertionEffect –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤—Å—Ç–∞–≤–∫—É –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å—Ç–∏–ª–µ–π!

---

# 12. use Hook üì¶

## –ß—Ç–æ —Ç–∞–∫–æ–µ use()?

**use()** ‚Äî —ç—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö—É–∫ –¥–ª—è —á—Ç–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (Promise, Context). –≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ö—É–∫ –≤ React, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —É—Å–ª–æ–≤–Ω–æ!

```javascript
import { use, Suspense } from 'react';

// –ß—Ç–µ–Ω–∏–µ Promise
function DataComponent({ dataPromise }) {
  const data = use(dataPromise);
  return <div>{data.message}</div>;
}

// –ß—Ç–µ–Ω–∏–µ Context
function ThemedButton() {
  const theme = use(ThemeContext);
  return <button className={theme}>Click</button>;
}

// –£—Å–ª–æ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (—É–Ω–∏–∫–∞–ª—å–Ω–æ!)
function Component({ shouldLoad }) {
  if (shouldLoad) {
    const data = use(fetchData()); // ‚úÖ –ú–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —É—Å–ª–æ–≤–Ω–æ!
    return <div>{data}</div>;
  }
  return <div>No data</div>;
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç use()

**use()** —á–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ (Promise –∏–ª–∏ Context):

```javascript
// 1. –° Promise ‚Äî –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä –¥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
function UserProfile({ userPromise }) {
  const user = use(userPromise); // Suspense boundaries will catch this
  return <div>Hello, {user.name}!</div>;
}

// 2. –° Context ‚Äî —á–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
function StatusBar() {
  const status = use(StatusContext);
  return <div>Status: {status}</div>;
}

// 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å Suspense
function App() {
  const userPromise = fetchUser('123');

  return (
    <Suspense fallback={<div>Loading...</div>}>
      <UserProfile userPromise={userPromise} />
    </Suspense>
  );
}
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** ‚Äî –æ–¥–∏–Ω API –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
2. **–£—Å–ª–æ–≤–Ω–æ—Å—Ç—å** ‚Äî –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤ if, —Ü–∏–∫–ª–∞—Ö
3. **Suspense** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è Promise
4. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** ‚Äî Promise –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–º

## –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ Promise –≤ —Ä–µ–Ω–¥–µ—Ä–µ

```javascript
// ‚ùå –ü–õ–û–•–û: Promise —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä
function Component() {
  const data = use(fetch('/api/data')); // –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã!
  return <div>{data}</div>;
}

// ‚úÖ –•–û–†–û–®–û: –°—Ç–∞–±–∏–ª—å–Ω—ã–π Promise
function Component() {
  const [dataPromise] = useState(() => fetch('/api/data'));
  const data = use(dataPromise);
  return <div>{data}</div>;
}

// ‚úÖ –ò–õ–ò: Promise –∏–∑ props
function Component({ dataPromise }) {
  const data = use(dataPromise);
  return <div>{data}</div>;
}
```

### 2. ‚ùå –ó–∞–±—ã–ª–∏ Suspense –≥—Ä–∞–Ω–∏—Ü—É

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–µ—Ç Suspense
function App() {
  return <DataComponent dataPromise={fetchData()} />; // Error!
}

// ‚úÖ –•–û–†–û–®–û: —Å Suspense
function App() {
  return (
    <Suspense fallback={<Loading />}>
      <DataComponent dataPromise={fetchData()} />
    </Suspense>
  );
}
```

### 3. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```javascript
// ‚ùå –ü–õ–û–•–û: try-catch –Ω–µ –ø–æ–º–æ–∂–µ—Ç
function Component({ dataPromise }) {
  try {
    const data = use(dataPromise);
    return <div>{data}</div>;
  } catch (error) {
    return <div>Error</div>; // –ù–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç!
  }
}

// ‚úÖ –•–û–†–û–®–û: ErrorBoundary
class ErrorBoundary extends React.Component {
  state = { hasError: false };

  static getDerivedStateFromError() {
    return { hasError: true };
  }

  render() {
    if (this.state.hasError) {
      return <div>Error occurred</div>;
    }
    return this.props.children;
  }
}

function App() {
  return (
    <ErrorBoundary>
      <Suspense fallback={<Loading />}>
        <Component dataPromise={fetchData()} />
      </Suspense>
    </ErrorBoundary>
  );
}
```

### 4. ‚ùå –£—Å–ª–æ–≤–Ω—ã–π –≤—ã–∑–æ–≤ —Å useContext

```javascript
// ‚ùå –ü–õ–û–•–û: useContext –Ω–µ–ª—å–∑—è –≤—ã–∑—ã–≤–∞—Ç—å —É—Å–ª–æ–≤–Ω–æ
function Component({ shouldShow }) {
  if (shouldShow) {
    const theme = useContext(ThemeContext); // –û—à–∏–±–∫–∞ –ø—Ä–∞–≤–∏–ª —Ö—É–∫–æ–≤!
  }
}

// ‚úÖ –•–û–†–û–®–û: use() –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —É—Å–ª–æ–≤–Ω–æ
function Component({ shouldShow }) {
  if (shouldShow) {
    const theme = use(ThemeContext); // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
    return <div className={theme}>Content</div>;
  }
  return null;
}
```

### 5. ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ rejected Promise

```javascript
// ‚ùå –ü–õ–û–•–û: Promise —É–∂–µ rejected
const rejectedPromise = Promise.reject('Error');

function Component() {
  const data = use(rejectedPromise); // –í—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É —Å—Ä–∞–∑—É!
}

// ‚úÖ –•–û–†–û–®–û: —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Promise –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
function Component() {
  const [dataPromise] = useState(() =>
    fetch('/api/data')
      .then(res => res.json())
      .catch(err => ({ error: err.message }))
  );

  const data = use(dataPromise);

  if (data.error) {
    return <div>Error: {data.error}</div>;
  }

  return <div>{data.message}</div>;
}
```

### 6. ‚ùå –°–º–µ—à–∏–≤–∞–Ω–∏–µ use() —Å useState –¥–ª—è –æ–¥–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö

```javascript
// ‚ùå –ü–õ–û–•–û: –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
function Component({ dataPromise }) {
  const [data, setData] = useState(null);
  const promiseData = use(dataPromise);

  useEffect(() => {
    setData(promiseData); // –ó–∞—á–µ–º?
  }, [promiseData]);

  return <div>{data}</div>;
}

// ‚úÖ –•–û–†–û–®–û: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é
function Component({ dataPromise }) {
  const data = use(dataPromise);
  return <div>{data}</div>;
}
```

### 7. ‚ùå –í–ª–æ–∂–µ–Ω–Ω—ã–µ use() –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```javascript
// ‚ùå –ü–õ–û–•–û: –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
function Component() {
  const user = use(fetchUser());
  const posts = use(fetchUserPosts(user.id)); // –ñ–¥—ë—Ç user
  const comments = use(fetchPostComments(posts[0].id)); // –ñ–¥—ë—Ç posts

  return <div>...</div>;
}

// ‚úÖ –•–û–†–û–®–û: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
function Component() {
  const userPromise = useMemo(() => fetchUser(), []);
  const user = use(userPromise);

  const postsPromise = useMemo(() => fetchUserPosts(user.id), [user.id]);
  const posts = use(postsPromise);

  return <div>...</div>;
}

// ‚úÖ –ï–©–Å –õ–£–ß–®–ï: Promise.all
function Component() {
  const [user, posts, comments] = use(
    Promise.all([
      fetchUser(),
      fetchPosts(),
      fetchComments()
    ])
  );

  return <div>...</div>;
}
```

### 8. ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ü–∏–∫–ª–∞—Ö –±–µ–∑ –∫–ª—é—á–µ–π

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ Promise
function List({ ids }) {
  return (
    <div>
      {ids.map(id => {
        const data = use(fetch(`/api/${id}`)); // –ù–æ–≤—ã–π Promise –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä!
        return <div key={id}>{data}</div>;
      })}
    </div>
  );
}

// ‚úÖ –•–û–†–û–®–û: –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
function ListItem({ id, dataPromise }) {
  const data = use(dataPromise);
  return <div>{data}</div>;
}

function List({ ids }) {
  const promises = useMemo(
    () => ids.map(id => fetch(`/api/${id}`)),
    [ids]
  );

  return (
    <div>
      {ids.map((id, index) => (
        <Suspense key={id} fallback={<Loading />}>
          <ListItem id={id} dataPromise={promises[index]} />
        </Suspense>
      ))}
    </div>
  );
}
```

### 9. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å TypeScript

```typescript
// ‚ùå –ü–õ–û–•–û: any
function Component({ dataPromise }: { dataPromise: Promise<any> }) {
  const data = use(dataPromise); // data: any
  return <div>{data.message}</div>;
}

// ‚úÖ –•–û–†–û–®–û: —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Promise
interface User {
  id: string;
  name: string;
}

function Component({ userPromise }: { userPromise: Promise<User> }) {
  const user = use(userPromise); // user: User
  return <div>{user.name}</div>;
}

// ‚úÖ –•–û–†–û–®–û: Context —Å —Ç–∏–ø–∞–º–∏
const ThemeContext = createContext<'light' | 'dark'>('light');

function ThemedButton() {
  const theme = use(ThemeContext); // theme: 'light' | 'dark'
  return <button className={theme}>Click</button>;
}
```

### 10. ‚ùå –ó–∞–±—ã–ª–∏ –ø—Ä–æ race conditions

```javascript
// ‚ùå –ü–õ–û–•–û: race conditions
function SearchResults({ query }) {
  const results = use(fetch(`/api/search?q=${query}`));
  return <div>{results.map(r => <div key={r.id}>{r.title}</div>)}</div>;
}

// ‚úÖ –•–û–†–û–®–û: –∫–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–ø—Ä–æ—Å–æ–≤
function SearchResults({ query }) {
  const resultsPromise = useMemo(() => {
    const controller = new AbortController();

    return fetch(`/api/search?q=${query}`, {
      signal: controller.signal
    }).then(res => res.json());
  }, [query]);

  const results = use(resultsPromise);
  return <div>{results.map(r => <div key={r.id}>{r.title}</div>)}</div>;
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è Server Components** ‚Äî –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è RSC
2. **üîß –°—Ç–∞–±–∏–ª—å–Ω—ã–µ Promise** ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –≤–Ω–µ —Ä–µ–Ω–¥–µ—Ä–∞ –∏–ª–∏ –º–µ–º–æ–∏–∑–∏—Ä—É–π—Ç–µ
3. **üìö Suspense –≥—Ä–∞–Ω–∏—Ü—ã** ‚Äî –≤—Å–µ–≥–¥–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
4. **üöÄ ErrorBoundary** ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
5. **‚ö° –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Promise.all
6. **üé® –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å use()

> üì¶ use() ‚Äî —ç—Ç–æ –±—É–¥—É—â–µ–µ —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ React!

---

# 13. useOptimistic Hook ‚ö°

## –ß—Ç–æ —Ç–∞–∫–æ–µ useOptimistic()?

**useOptimistic()** ‚Äî —Ö—É–∫ –¥–ª—è –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π UI. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –ø–æ–∫–∞ —Å–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å.

```javascript
import { useOptimistic, useTransition } from 'react';

function LikeButton({ initialLikes }) {
  const [likes, setLikes] = useState(initialLikes);
  const [optimisticLikes, addOptimisticLike] = useOptimistic(
    likes,
    (currentLikes, amount) => currentLikes + amount
  );
  const [isPending, startTransition] = useTransition();

  const handleLike = () => {
    startTransition(async () => {
      // UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
      addOptimisticLike(1);

      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
      const result = await fetch('/api/like', { method: 'POST' });
      const data = await result.json();

      // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      setLikes(data.likes);
    });
  };

  return (
    <button onClick={handleLike} disabled={isPending}>
      ‚ù§Ô∏è {optimisticLikes}
    </button>
  );
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useOptimistic()

**useOptimistic()** —Å–æ–∑–¥–∞—ë—Ç –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –≤—Ä–µ–º—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:

```javascript
const [optimisticState, addOptimistic] = useOptimistic(
  actualState,
  (currentState, optimisticValue) => {
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
    return newState;
  }
);

// 1. –í—ã–∑—ã–≤–∞–µ—Ç–µ addOptimistic() ‚Äî UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
// 2. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è async –æ–ø–µ—Ä–∞—Ü–∏—è
// 3. –û–±–Ω–æ–≤–ª—è–µ—Ç–µ actualState ‚Äî optimisticState –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** ‚Äî UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç** ‚Äî –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ actualState
3. **useTransition** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ
4. **–û–ø—Ç–∏–º–∏–∑–º** ‚Äî –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º —É—Å–ø–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–∏

## –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. ‚ùå –ó–∞–±—ã–ª–∏ useTransition

```javascript
// ‚ùå –ü–õ–û–•–û: –±–µ–∑ useTransition
function Component() {
  const [messages, setMessages] = useState([]);
  const [optimisticMessages, addOptimistic] = useOptimistic(
    messages,
    (state, msg) => [...state, msg]
  );

  const handleSend = async (text) => {
    addOptimistic({ text, status: 'sending' }); // –ù–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

    const sent = await sendMessage(text);
    setMessages(prev => [...prev, sent]);
  };

  return <div>...</div>;
}

// ‚úÖ –•–û–†–û–®–û: —Å useTransition
function Component() {
  const [messages, setMessages] = useState([]);
  const [optimisticMessages, addOptimistic] = useOptimistic(
    messages,
    (state, msg) => [...state, msg]
  );
  const [isPending, startTransition] = useTransition();

  const handleSend = async (text) => {
    startTransition(async () => {
      addOptimistic({ text, status: 'sending' });

      const sent = await sendMessage(text);
      setMessages(prev => [...prev, sent]);
    });
  };

  return <div>...</div>;
}
```

### 2. ‚ùå –ù–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç–µ actualState

```javascript
// ‚ùå –ü–õ–û–•–û: —Ç–æ–ª—å–∫–æ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
function TodoList() {
  const [todos, setTodos] = useState([]);
  const [optimisticTodos, updateOptimistic] = useOptimistic(
    todos,
    (state, newTodo) => [...state, newTodo]
  );

  const addTodo = (text) => {
    startTransition(async () => {
      updateOptimistic({ id: Date.now(), text });
      await fetch('/api/todos', { method: 'POST', body: JSON.stringify({ text }) });
      // ‚ùå –ó–∞–±—ã–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å todos! –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è
    });
  };

  return <div>{optimisticTodos.map(...)}</div>;
}

// ‚úÖ –•–û–†–û–®–û: –æ–±–Ω–æ–≤–ª—è–µ–º actualState
function TodoList() {
  const [todos, setTodos] = useState([]);
  const [optimisticTodos, updateOptimistic] = useOptimistic(
    todos,
    (state, newTodo) => [...state, newTodo]
  );

  const addTodo = (text) => {
    startTransition(async () => {
      const tempTodo = { id: Date.now(), text };
      updateOptimistic(tempTodo);

      const response = await fetch('/api/todos', {
        method: 'POST',
        body: JSON.stringify({ text })
      });
      const savedTodo = await response.json();

      setTodos(prev => [...prev, savedTodo]); // ‚úÖ –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    });
  };

  return <div>{optimisticTodos.map(...)}</div>;
}
```

### 3. ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

```javascript
// ‚ùå –ü–õ–û–•–û: –æ–ø—Ç–∏–º–∏–∑–º –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
function PaymentButton({ amount }) {
  const [balance, setBalance] = useState(1000);
  const [optimisticBalance, updateBalance] = useOptimistic(
    balance,
    (current, change) => current - change
  );

  const handlePayment = () => {
    startTransition(async () => {
      updateBalance(amount); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–∞–∑—É

      // –ß—Ç–æ –µ—Å–ª–∏ –ø–ª–∞—Ç—ë–∂ –Ω–µ –ø—Ä–æ–π–¥—ë—Ç?
      await processPayment(amount);
      setBalance(prev => prev - amount);
    });
  };

  return <div>Balance: {optimisticBalance}</div>; // ‚ùå –û–ø–∞—Å–Ω–æ!
}

// ‚úÖ –•–û–†–û–®–û: –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–º–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
function PaymentButton({ amount }) {
  const [balance, setBalance] = useState(1000);
  const [isPending, setIsPending] = useState(false);

  const handlePayment = async () => {
    setIsPending(true);

    try {
      const result = await processPayment(amount);

      if (result.success) {
        setBalance(result.newBalance); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
      }
    } finally {
      setIsPending(false);
    }
  };

  return (
    <div>
      Balance: {balance}
      {isPending && <span>Processing...</span>}
    </div>
  );
}
```

### 4. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
function CommentForm() {
  const [comments, setComments] = useState([]);
  const [optimisticComments, addOptimistic] = useOptimistic(
    comments,
    (state, comment) => [...state, comment]
  );

  const handleSubmit = (text) => {
    startTransition(async () => {
      addOptimistic({ id: Date.now(), text, status: 'pending' });

      await sendComment(text); // –ú–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É!
      setComments(prev => [...prev, { id: Date.now(), text }]);
    });
  };

  // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Äî –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ—Å—Ç–∞–Ω–µ—Ç—Å—è!
}

// ‚úÖ –•–û–†–û–®–û: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
function CommentForm() {
  const [comments, setComments] = useState([]);
  const [optimisticComments, addOptimistic] = useOptimistic(
    comments,
    (state, comment) => [...state, comment]
  );
  const [error, setError] = useState(null);

  const handleSubmit = (text) => {
    startTransition(async () => {
      const tempComment = { id: Date.now(), text, status: 'pending' };
      addOptimistic(tempComment);

      try {
        const savedComment = await sendComment(text);
        setComments(prev => [...prev, savedComment]);
        setError(null);
      } catch (err) {
        setError(err.message);
        // optimisticComments –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–∞—Ç–∏—Ç—Å—è –∫ comments
        // —Ç–∞–∫ –∫–∞–∫ –º—ã –Ω–µ –æ–±–Ω–æ–≤–∏–ª–∏ comments
      }
    });
  };

  return (
    <div>
      {error && <div className="error">{error}</div>}
      {optimisticComments.map(comment => (
        <div key={comment.id}>{comment.text}</div>
      ))}
    </div>
  );
}
```

### 5. ‚ùå –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```javascript
// ‚ùå –ü–õ–û–•–û: —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ updateFn
function TodoList() {
  const [todos, setTodos] = useState([]);
  const [optimisticTodos, updateOptimistic] = useOptimistic(
    todos,
    (state, action) => {
      // ‚ùå –°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ!
      if (action.type === 'add') {
        return [...state, action.todo];
      } else if (action.type === 'toggle') {
        return state.map(todo =>
          todo.id === action.id
            ? { ...todo, completed: !todo.completed }
            : todo
        );
      } else if (action.type === 'delete') {
        return state.filter(todo => todo.id !== action.id);
      }
      return state;
    }
  );

  // –¢—Ä—É–¥–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
}

// ‚úÖ –•–û–†–û–®–û: –ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞, –Ω–µ—Å–∫–æ–ª—å–∫–æ useOptimistic
function TodoList() {
  const [todos, setTodos] = useState([]);

  const [optimisticTodos, addOptimisticTodo] = useOptimistic(
    todos,
    (state, todo) => [...state, todo]
  );

  const [toggledTodos, toggleOptimistic] = useOptimistic(
    optimisticTodos,
    (state, id) => state.map(todo =>
      todo.id === id ? { ...todo, completed: !todo.completed } : todo
    )
  );

  // –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏
}
```

### 6. ‚ùå –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ —Å—Ç–∞—Ç—É—Å pending

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–µ—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏
function MessageList() {
  const [messages, setMessages] = useState([]);
  const [optimisticMessages, addOptimistic] = useOptimistic(
    messages,
    (state, msg) => [...state, msg]
  );

  return (
    <div>
      {optimisticMessages.map(msg => (
        <div key={msg.id}>
          {msg.text}
          {/* ‚ùå –ù–µ—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è */}
        </div>
      ))}
    </div>
  );
}

// ‚úÖ –•–û–†–û–®–û: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å
function MessageList() {
  const [messages, setMessages] = useState([]);
  const [optimisticMessages, addOptimistic] = useOptimistic(
    messages,
    (state, msg) => [...state, msg]
  );

  return (
    <div>
      {optimisticMessages.map(msg => (
        <div
          key={msg.id}
          style={{
            opacity: msg.status === 'pending' ? 0.5 : 1,
            backgroundColor: msg.status === 'pending' ? '#fef3c7' : 'transparent'
          }}
        >
          {msg.text}
          {msg.status === 'pending' && <span>‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...</span>}
        </div>
      ))}
    </div>
  );
}
```

### 7. ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```javascript
// ‚ùå –ü–õ–û–•–û: –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
function LikeButton() {
  const [likes, setLikes] = useState(42);
  const [displayLikes, setDisplayLikes] = useState(42); // ‚ùå –î—É–±–ª–∏–∫–∞—Ç!
  const [optimisticLikes, addOptimistic] = useOptimistic(
    likes,
    (current, amount) => current + amount
  );

  const handleLike = () => {
    startTransition(async () => {
      setDisplayLikes(prev => prev + 1); // ‚ùå –ó–∞—á–µ–º?
      addOptimistic(1);

      const result = await toggleLike();
      setLikes(result.likes);
    });
  };

  return <div>{displayLikes}</div>; // ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–µ —Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ!
}

// ‚úÖ –•–û–†–û–®–û: –æ–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
function LikeButton() {
  const [likes, setLikes] = useState(42);
  const [optimisticLikes, addOptimistic] = useOptimistic(
    likes,
    (current, amount) => current + amount
  );

  const handleLike = () => {
    startTransition(async () => {
      addOptimistic(1);

      const result = await toggleLike();
      setLikes(result.likes);
    });
  };

  return <div>{optimisticLikes}</div>; // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!
}
```

### 8. ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

```javascript
// ‚ùå –ü–õ–û–•–û: –æ–ø—Ç–∏–º–∏–∑–º –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
function Counter() {
  const [count, setCount] = useState(0);
  const [optimisticCount, addOptimistic] = useOptimistic(
    count,
    (current, amount) => current + amount
  );

  const increment = () => {
    startTransition(async () => {
      addOptimistic(1);
      // ‚ùå –ó–∞—á–µ–º? –û–ø–µ—Ä–∞—Ü–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è!
      setCount(prev => prev + 1);
    });
  };

  return <div>{optimisticCount}</div>;
}

// ‚úÖ –•–û–†–û–®–û: –æ–±—ã—á–Ω—ã–π useState –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
function Counter() {
  const [count, setCount] = useState(0);

  const increment = () => {
    setCount(prev => prev + 1); // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ!
  };

  return <div>{count}</div>;
}
```

### 9. ‚ùå –ú—É—Ç–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

```javascript
// ‚ùå –ü–õ–û–•–û: –º—É—Ç–∞—Ü–∏—è
function TodoList() {
  const [todos, setTodos] = useState([]);
  const [optimisticTodos, updateOptimistic] = useOptimistic(
    todos,
    (state, todo) => {
      state.push(todo); // ‚ùå –ú—É—Ç–∞—Ü–∏—è!
      return state;
    }
  );
}

// ‚úÖ –•–û–†–û–®–û: –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å
function TodoList() {
  const [todos, setTodos] = useState([]);
  const [optimisticTodos, updateOptimistic] = useOptimistic(
    todos,
    (state, todo) => [...state, todo] // ‚úÖ –ù–æ–≤—ã–π –º–∞—Å—Å–∏–≤
  );
}
```

### 10. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

```javascript
// ‚ùå –ü–õ–û–•–û: –æ–±–Ω–æ–≤–ª—è–µ–º state –¥–æ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–≥–æ
function Component() {
  const [items, setItems] = useState([]);
  const [optimisticItems, addOptimistic] = useOptimistic(
    items,
    (state, item) => [...state, item]
  );

  const addItem = (item) => {
    startTransition(async () => {
      setItems(prev => [...prev, item]); // ‚ùå –°–Ω–∞—á–∞–ª–∞ —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      addOptimistic(item); // –ù–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è

      await saveItem(item);
    });
  };
}

// ‚úÖ –•–û–†–û–®–û: —Å–Ω–∞—á–∞–ª–∞ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ, –ø–æ—Ç–æ–º —Ä–µ–∞–ª—å–Ω–æ–µ
function Component() {
  const [items, setItems] = useState([]);
  const [optimisticItems, addOptimistic] = useOptimistic(
    items,
    (state, item) => [...state, item]
  );

  const addItem = (item) => {
    startTransition(async () => {
      addOptimistic(item); // ‚úÖ –°–Ω–∞—á–∞–ª–∞ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ

      const saved = await saveItem(item);
      setItems(prev => [...prev, saved]); // ‚úÖ –ü–æ—Ç–æ–º —Ä–µ–∞–ª—å–Ω–æ–µ
    });
  };
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –î–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π** ‚Äî –ª–∞–π–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
2. **üîß –í—Å–µ–≥–¥–∞ —Å useTransition** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–∞—Ä–∞
3. **üìö –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** ‚Äî –æ—Ç–∫–∞—Ç—ã–≤–∞–π—Ç–µ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
4. **üöÄ –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å—Ç–∞—Ç—É—Å** ‚Äî –∏–Ω–¥–∏–∫–∞—Ü–∏—è pending —Å–æ—Å—Ç–æ—è–Ω–∏—è
5. **‚ö° –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞** ‚Äî –Ω–µ —É—Å–ª–æ–∂–Ω—è–π—Ç–µ updateFn
6. **üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è** ‚Äî –ø–æ–º–µ—á–∞–π—Ç–µ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

> ‚ö° useOptimistic –¥–µ–ª–∞–µ—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Ç–∑—ã–≤—á–∏–≤—ã–º!

---

# 14. useActionState Hook üìã

## –ß—Ç–æ —Ç–∞–∫–æ–µ useActionState()?

**useActionState()** ‚Äî —Ö—É–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ñ–æ—Ä–º –∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (Server Actions). –ó–∞–º–µ–Ω—è–µ—Ç useFormState –∏–∑ React 18.

```javascript
import { useActionState } from 'react';

async function submitForm(prevState, formData) {
  const email = formData.get('email');

  if (!email) {
    return { error: 'Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' };
  }

  const response = await fetch('/api/submit', {
    method: 'POST',
    body: formData
  });

  if (!response.ok) {
    return { error: '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞' };
  }

  return { success: true, message: '–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!' };
}

function Form() {
  const [state, formAction, isPending] = useActionState(
    submitForm,
    { error: null } // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  );

  return (
    <form action={formAction}>
      <input name="email" disabled={isPending} />
      <button type="submit" disabled={isPending}>
        {isPending ? '–û—Ç–ø—Ä–∞–≤–∫–∞...' : '–û—Ç–ø—Ä–∞–≤–∏—Ç—å'}
      </button>
      {state.error && <p>{state.error}</p>}
      {state.success && <p>{state.message}</p>}
    </form>
  );
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useActionState()

**useActionState()** –ø—Ä–∏–Ω–∏–º–∞–µ—Ç action —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ–±—ë—Ä–Ω—É—Ç—ã–π action –∏ —Ñ–ª–∞–≥ pending:

```javascript
const [state, formAction, isPending] = useActionState(actionFn, initialState);

// state ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∑–æ–≤–∞ actionFn
// formAction ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ action –∞—Ç—Ä–∏–±—É—Ç —Ñ–æ—Ä–º—ã
// isPending ‚Äî true –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è action

// Action —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç:
async function actionFn(previousState, formData) {
  // previousState ‚Äî –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ state
  // formData ‚Äî –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã

  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–æ–≤—ã–º state
  return newState;
}
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JavaScript
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π pending** ‚Äî –Ω–µ –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é
3. **FormData API** ‚Äî –Ω–∞—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ä–º–∞–º–∏
4. **Server Actions** ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è RSC

## –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ FormData

```javascript
// ‚ùå –ü–õ–û–•–û: —Ä—É—á–Ω–æ–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
async function submitAction(prevState, formData) {
  const email = document.querySelector('[name="email"]').value; // ‚ùå –ü–ª–æ—Ö–æ!
  const password = document.querySelector('[name="password"]').value;

  return { email, password };
}

function Form() {
  const [state, formAction] = useActionState(submitAction, {});

  return (
    <form action={formAction}>
      <input name="email" />
      <input name="password" />
      <button type="submit">Submit</button>
    </form>
  );
}

// ‚úÖ –•–û–†–û–®–û: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ FormData
async function submitAction(prevState, formData) {
  const email = formData.get('email'); // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!
  const password = formData.get('password');

  return { email, password };
}
```

### 2. ‚ùå –ó–∞–±—ã–ª–∏ –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º
async function loginAction(prevState, formData) {
  const email = formData.get('email');

  if (!email) {
    console.log('Error'); // ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –æ–±–Ω–æ–≤–∏—Ç state!
  }

  await fetch('/api/login', { method: 'POST', body: formData });
  // ‚ùå –ù–∏—á–µ–≥–æ –Ω–µ –≤–µ—Ä–Ω—É–ª–∏ ‚Äî state –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è!
}

// ‚úÖ –•–û–†–û–®–û: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
async function loginAction(prevState, formData) {
  const email = formData.get('email');

  if (!email) {
    return { error: 'Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }; // ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É
  }

  const response = await fetch('/api/login', {
    method: 'POST',
    body: formData
  });

  if (!response.ok) {
    return { error: '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞' };
  }

  return { success: true, message: '–í—ã –≤–æ—à–ª–∏!' }; // ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ–º —É—Å–ø–µ—Ö
}
```

### 3. ‚ùå –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ isPending

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–µ—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏
function Form() {
  const [state, formAction, isPending] = useActionState(submitAction, {});

  return (
    <form action={formAction}>
      <input name="email" />
      {/* ‚ùå –ù–µ—Ç disabled, –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É –º–Ω–æ–≥–æ —Ä–∞–∑ */}
      <button type="submit">Submit</button>
    </form>
  );
}

// ‚úÖ –•–û–†–û–®–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º isPending
function Form() {
  const [state, formAction, isPending] = useActionState(submitAction, {});

  return (
    <form action={formAction}>
      <input name="email" disabled={isPending} /> {/* ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ–º –≤–≤–æ–¥ */}
      <button type="submit" disabled={isPending}>
        {isPending ? '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...' : '–û—Ç–ø—Ä–∞–≤–∏—Ç—å'} {/* ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å */}
      </button>
    </form>
  );
}
```

### 4. ‚ùå –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π action

```javascript
// ‚ùå –ü–õ–û–•–û: —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π action (–∑–∞—á–µ–º useActionState?)
function countAction(prevState, formData) {
  return { count: prevState.count + 1 }; // –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
}

function Counter() {
  const [state, formAction, isPending] = useActionState(
    countAction,
    { count: 0 }
  );

  return (
    <form action={formAction}>
      <div>{state.count}</div>
      <button type="submit">Increment</button>
    </form>
  );
}

// ‚úÖ –•–û–†–û–®–û: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ useState –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <div>{count}</div>
      <button onClick={() => setCount(c => c + 1)}>Increment</button>
    </div>
  );
}

// ‚úÖ useActionState –¥–ª—è async –æ–ø–µ—Ä–∞—Ü–∏–π
async function saveCountAction(prevState, formData) {
  const newCount = prevState.count + 1;

  await fetch('/api/count', {
    method: 'POST',
    body: JSON.stringify({ count: newCount })
  });

  return { count: newCount };
}
```

### 5. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

```javascript
// ‚ùå –ü–õ–û–•–û: –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
function Form() {
  const [state, formAction, isPending] = useActionState(submitAction, {});

  const handleSubmit = (e) => {
    e.preventDefault();

    const email = e.target.email.value;
    if (!email.includes('@')) {
      alert('–ù–µ–≤–µ—Ä–Ω—ã–π email'); // ‚ùå –¢–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
      return;
    }

    formAction(new FormData(e.target));
  };

  return <form onSubmit={handleSubmit}>...</form>;
}

// ‚úÖ –•–û–†–û–®–û: –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ action (—Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JS)
async function submitAction(prevState, formData) {
  const email = formData.get('email');

  // ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
  if (!email || !email.includes('@')) {
    return { error: '–ù–µ–≤–µ—Ä–Ω—ã–π email' };
  }

  const response = await fetch('/api/submit', {
    method: 'POST',
    body: formData
  });

  return { success: true };
}

function Form() {
  const [state, formAction, isPending] = useActionState(submitAction, {});

  return (
    <form action={formAction}>
      <input name="email" />
      <button type="submit">Submit</button>
      {state.error && <p>{state.error}</p>}
    </form>
  );
}
```

### 6. ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ prevState

```javascript
// ‚ùå –ü–õ–û–•–û: –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º prevState
async function addTodoAction(prevState, formData) {
  const text = formData.get('todo');

  // ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º prevState.todos!
  const response = await fetch('/api/todos', {
    method: 'POST',
    body: JSON.stringify({ text })
  });

  const newTodo = await response.json();

  return { todos: [newTodo] }; // ‚ùå –ü–æ—Ç–µ—Ä—è–ª–∏ —Å—Ç–∞—Ä—ã–µ todos!
}

// ‚úÖ –•–û–†–û–®–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º prevState
async function addTodoAction(prevState, formData) {
  const text = formData.get('todo');

  const response = await fetch('/api/todos', {
    method: 'POST',
    body: JSON.stringify({ text })
  });

  const newTodo = await response.json();

  return {
    todos: [...prevState.todos, newTodo] // ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ä—ã–µ
  };
}
```

### 7. ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

```javascript
// ‚ùå –ü–õ–û–•–û: –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
function Form() {
  const [state, formAction, isPending] = useActionState(submitAction, {});

  return (
    <form action={formAction}>
      <input name="email" />
      <button type="submit">Submit</button>
      <button type="submit">Submit Again</button> {/* ‚ùå –î–≤–µ –∫–Ω–æ–ø–∫–∏! */}
    </form>
  );
}

// ‚úÖ –•–û–†–û–®–û: –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞, –±–ª–æ–∫–∏—Ä—É–µ–º –ø—Ä–∏ pending
function Form() {
  const [state, formAction, isPending] = useActionState(submitAction, {});

  return (
    <form action={formAction}>
      <input name="email" disabled={isPending} />
      <button type="submit" disabled={isPending}>
        {isPending ? '–û—Ç–ø—Ä–∞–≤–∫–∞...' : 'Submit'}
      </button>
    </form>
  );
}
```

### 8. ‚ùå –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏

```javascript
// ‚ùå –ü–õ–û–•–û: —Ñ–æ—Ä–º–∞ –æ—á–∏—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏
async function submitAction(prevState, formData) {
  const name = formData.get('name');
  const email = formData.get('email');

  if (!name) {
    return { error: '–ò–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' };
  }

  // –ü–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reset())
}

function Form() {
  const [state, formAction, isPending] = useActionState(submitAction, {});
  const formRef = useRef(null);

  useEffect(() => {
    if (state.success) {
      formRef.current?.reset(); // ‚ùå –û—á–∏—â–∞–µ–º –∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ!
    }
  }, [state]);

  return <form ref={formRef} action={formAction}>...</form>;
}

// ‚úÖ –•–û–†–û–®–û: –æ—á–∏—â–∞–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
function Form() {
  const [state, formAction, isPending] = useActionState(submitAction, {});
  const formRef = useRef(null);

  useEffect(() => {
    if (state.success && !state.error) { // ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
      formRef.current?.reset();
    }
  }, [state]);

  return (
    <form ref={formRef} action={formAction}>
      <input name="name" defaultValue={state.name} /> {/* –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ */}
      <input name="email" defaultValue={state.email} />
      <button type="submit">Submit</button>
      {state.error && <p>{state.error}</p>}
    </form>
  );
}
```

### 9. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
async function uploadAction(prevState, formData) {
  const file = formData.get('file');

  // ‚ùå –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ JSON
  await fetch('/api/upload', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ file }) // ‚ùå –§–∞–π–ª –Ω–µ–ª—å–∑—è —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å!
  });
}

// ‚úÖ –•–û–†–û–®–û: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º FormData –Ω–∞–ø—Ä—è–º—É—é
async function uploadAction(prevState, formData) {
  const file = formData.get('file');

  if (!file || file.size === 0) {
    return { error: '–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω' };
  }

  // ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º FormData —Å —Ñ–∞–π–ª–æ–º
  const response = await fetch('/api/upload', {
    method: 'POST',
    body: formData // FormData –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã
  });

  if (!response.ok) {
    return { error: '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏' };
  }

  const result = await response.json();
  return { success: true, fileUrl: result.url };
}
```

### 10. ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ permalink

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–µ—Ç permalink –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
async function createPostAction(prevState, formData) {
  const title = formData.get('title');

  const response = await fetch('/api/posts', {
    method: 'POST',
    body: formData
  });

  const post = await response.json();

  return { success: true, postId: post.id }; // ‚ùå –ù–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º
}

function CreatePost() {
  const [state, formAction, isPending] = useActionState(createPostAction, {});

  return (
    <form action={formAction}>
      <input name="title" />
      <button type="submit">Create</button>
      {state.success && <p>Post created!</p>} {/* ‚ùå –û—Å—Ç–∞—ë–º—Å—è –Ω–∞ —Ñ–æ—Ä–º–µ */}
    </form>
  );
}

// ‚úÖ –•–û–†–û–®–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º permalink –∞—Ç—Ä–∏–±—É—Ç –∏–ª–∏ navigate
async function createPostAction(prevState, formData) {
  const title = formData.get('title');

  const response = await fetch('/api/posts', {
    method: 'POST',
    body: formData
  });

  const post = await response.json();

  return { success: true, permalink: `/posts/${post.id}` }; // ‚úÖ Permalink
}

function CreatePost() {
  const [state, formAction, isPending] = useActionState(
    createPostAction,
    {},
    `/posts/new` // permalink –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è
  );
  const navigate = useNavigate();

  useEffect(() => {
    if (state.success && state.permalink) {
      navigate(state.permalink); // ‚úÖ –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º
    }
  }, [state, navigate]);

  return (
    <form action={formAction}>
      <input name="title" />
      <button type="submit">Create</button>
    </form>
  );
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –î–ª—è —Ñ–æ—Ä–º —Å Server Actions** ‚Äî –∏–¥–µ–∞–ª—å–Ω–∞—è –ø–∞—Ä–∞
2. **üîß –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ action** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JavaScript
3. **üìö –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FormData** ‚Äî –Ω–∞—Ç–∏–≤–Ω—ã–π API
4. **üöÄ –ë–ª–æ–∫–∏—Ä—É–π—Ç–µ –ø—Ä–∏ isPending** ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–π—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
5. **‚ö° –û—á–∏—â–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
6. **üé® Permalink** ‚Äî –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

> üìã useActionState ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ä–º–∞–º–∏ –≤ React!

---

# 15. useFormStatus Hook üîÑ

## –ß—Ç–æ —Ç–∞–∫–æ–µ useFormStatus()?

**useFormStatus()** ‚Äî —Ö—É–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç–∞—Ç—É—Å–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Ñ–æ—Ä–º—ã. –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Ñ–æ—Ä–º—ã!

```javascript
import { useFormStatus } from 'react-dom';

// –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –∫–Ω–æ–ø–∫–∞ Submit
function SubmitButton() {
  const { pending, data, method, action } = useFormStatus();

  return (
    <button type="submit" disabled={pending}>
      {pending ? '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...' : 'üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å'}
    </button>
  );
}

// –§–æ—Ä–º–∞
function LoginForm() {
  async function loginAction(formData) {
    'use server';
    await authenticateUser(formData);
  }

  return (
    <form action={loginAction}>
      <input name="email" />
      <input name="password" />

      {/* –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞–µ—Ç –æ pending */}
      <SubmitButton />
    </form>
  );
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç useFormStatus()

**useFormStatus()** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–ª–∏–∂–∞–π—à–µ–π —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Ñ–æ—Ä–º–µ:

```javascript
const { pending, data, method, action } = useFormStatus();

// pending: boolean ‚Äî —Ñ–æ—Ä–º–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
// data: FormData | null ‚Äî –¥–∞–Ω–Ω—ã–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Ñ–æ—Ä–º–æ–π
// method: 'get' | 'post' ‚Äî HTTP –º–µ—Ç–æ–¥
// action: string | function ‚Äî URL –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è action
```

**–í–ê–ñ–ù–û:** useFormStatus —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, –Ω–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–æ—Ä–º—ã!

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–î–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º—ã
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Äî —Å–ª–µ–¥–∏—Ç –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º —Ä–æ–¥–∏—Ç–µ–ª—è
3. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å** ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
4. **Server Actions** ‚Äî –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å RSC

## –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. ‚ùå –í—ã–∑–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–æ—Ä–º—ã

```javascript
// ‚ùå –ü–õ–û–•–û: useFormStatus –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–æ—Ä–º—ã
function LoginForm() {
  const { pending } = useFormStatus(); // ‚ùå –í–µ—Ä–Ω—ë—Ç false –≤—Å–µ–≥–¥–∞!

  async function loginAction(formData) {
    'use server';
    await authenticateUser(formData);
  }

  return (
    <form action={loginAction}>
      <input name="email" disabled={pending} /> {/* –ù–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç! */}
      <button type="submit" disabled={pending}>Submit</button>
    </form>
  );
}

// ‚úÖ –•–û–†–û–®–û: –≤ –¥–æ—á–µ—Ä–Ω–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
function SubmitButton() {
  const { pending } = useFormStatus(); // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
  return (
    <button type="submit" disabled={pending}>
      {pending ? '–û—Ç–ø—Ä–∞–≤–∫–∞...' : 'Submit'}
    </button>
  );
}

function LoginForm() {
  async function loginAction(formData) {
    'use server';
    await authenticateUser(formData);
  }

  return (
    <form action={loginAction}>
      <input name="email" />
      <SubmitButton /> {/* ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç */}
    </form>
  );
}
```

### 2. ‚ùå –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–µ–π –±–µ–∑ fieldset

```javascript
// ‚ùå –ü–õ–û–•–û: –æ—Ç–∫–ª—é—á–∞–µ–º –∫–∞–∂–¥–æ–µ –ø–æ–ª–µ –≤—Ä—É—á–Ω—É—é
function FormFields() {
  const { pending } = useFormStatus();

  return (
    <>
      <input name="name" disabled={pending} />
      <input name="email" disabled={pending} />
      <input name="phone" disabled={pending} />
      <textarea name="message" disabled={pending} />
      {/* ‚ùå –ú–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π */}
    </>
  );
}

// ‚úÖ –•–û–†–û–®–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º fieldset
function FormFields() {
  const { pending } = useFormStatus();

  return (
    <fieldset disabled={pending}> {/* ‚úÖ –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ */}
      <input name="name" />
      <input name="email" />
      <input name="phone" />
      <textarea name="message" />
    </fieldset>
  );
}
```

### 3. ‚ùå –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
function SubmitButton() {
  const { pending } = useFormStatus();

  return (
    <button type="submit" disabled={pending}>
      Submit {/* ‚ùå –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç */}
    </button>
  );
}

// ‚úÖ –•–û–†–û–®–û: —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º
function SubmitButton() {
  const { pending } = useFormStatus();

  return (
    <button type="submit" disabled={pending}>
      {pending ? '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...' : 'üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å'}
    </button>
  );
}

// ‚úÖ –ï–©–Å –õ–£–ß–®–ï: –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
function LoadingIndicator() {
  const { pending } = useFormStatus();

  if (!pending) return null;

  return (
    <div className="loading">
      ‚è≥ –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–¥–æ–∂–¥–∏—Ç–µ...
    </div>
  );
}

function Form() {
  return (
    <form action={submitAction}>
      <input name="email" />
      <SubmitButton />
      <LoadingIndicator /> {/* ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å */}
    </form>
  );
}
```

### 4. ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ Server Actions

```javascript
// ‚ùå –ü–õ–û–•–û: —Å –æ–±—ã—á–Ω—ã–º onSubmit (useFormStatus –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
function Form() {
  const handleSubmit = async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    await fetch('/api/submit', { method: 'POST', body: formData });
  };

  return (
    <form onSubmit={handleSubmit}>
      <SubmitButton /> {/* ‚ùå pending –≤—Å–µ–≥–¥–∞ false */}
    </form>
  );
}

// ‚úÖ –•–û–†–û–®–û: —Å useActionState (–∏–º–∏—Ç–∞—Ü–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞)
function Form() {
  const [state, formAction, isPending] = useActionState(submitAction, {});

  return (
    <FormStatusContext.Provider value={{ pending: isPending }}>
      <form action={formAction}>
        <SubmitButton /> {/* ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Context */}
      </form>
    </FormStatusContext.Provider>
  );
}

// ‚úÖ –õ–£–ß–®–ï: Server Actions (–Ω–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
function Form() {
  async function submitAction(formData) {
    'use server';
    await saveData(formData);
  }

  return (
    <form action={submitAction}>
      <SubmitButton /> {/* ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏ */}
    </form>
  );
}
```

### 5. ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏

```javascript
// ‚ùå –ü–õ–û–•–û: –¥—É–±–ª–∏—Ä—É–µ–º –ª–æ–≥–∏–∫—É –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–æ–ø–∫–∏
function Form() {
  return (
    <form action={submitAction}>
      <input name="email" />

      <SubmitButtonPrimary />
      <SubmitButtonSecondary />
      <CancelButton />
      {/* ‚ùå –ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ª–æ–≥–∏–∫—É pending */}
    </form>
  );
}

function SubmitButtonPrimary() {
  const { pending } = useFormStatus();
  return (
    <button disabled={pending} className="btn-primary">
      {pending ? '–û—Ç–ø—Ä–∞–≤–∫–∞...' : 'Submit'}
    </button>
  );
}

function SubmitButtonSecondary() {
  const { pending } = useFormStatus();
  return (
    <button disabled={pending} className="btn-secondary">
      {pending ? '–û—Ç–ø—Ä–∞–≤–∫–∞...' : 'Save Draft'}
    </button>
  );
}

// ‚úÖ –•–û–†–û–®–û: –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
function FormButton({ children, variant = 'primary', loadingText = 'Loading...' }) {
  const { pending } = useFormStatus();

  return (
    <button
      type="submit"
      disabled={pending}
      className={`btn-${variant}`}
    >
      {pending ? loadingText : children}
    </button>
  );
}

function Form() {
  return (
    <form action={submitAction}>
      <input name="email" />

      <FormButton variant="primary" loadingText="–û—Ç–ø—Ä–∞–≤–∫–∞...">
        Submit
      </FormButton>
      <FormButton variant="secondary" loadingText="–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...">
        Save Draft
      </FormButton>
    </form>
  );
}
```

### 6. ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ data –∏–∑ useFormStatus

```javascript
// ‚ùå –ü–õ–û–•–û: –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º data
function SubmitButton() {
  const { pending } = useFormStatus();
  // ‚ùå data –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω!

  return <button type="submit" disabled={pending}>Submit</button>;
}

// ‚úÖ –•–û–†–û–®–û: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
function SubmitButton() {
  const { pending, data } = useFormStatus();

  if (pending && data) {
    const email = data.get('email');
    return (
      <button type="submit" disabled>
        –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–ª—è {email}...
      </button>
    );
  }

  return <button type="submit">Submit</button>;
}
```

### 7. ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –±–µ–∑ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

```javascript
// ‚ùå –ü–õ–û–•–û: –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º
function Page() {
  return (
    <div>
      <form action={loginAction}>
        <input name="email" />
        <SubmitButton /> {/* ‚ùå –ö–∞–∫–∞—è —Ñ–æ—Ä–º–∞ pending? */}
      </form>

      <form action={registerAction}>
        <input name="name" />
        <SubmitButton /> {/* ‚ùå –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ */}
      </form>
    </div>
  );
}

// ‚úÖ –•–û–†–û–®–û: —Ä–∞–∑–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
function LoginButton() {
  const { pending } = useFormStatus();
  return (
    <button type="submit" disabled={pending}>
      {pending ? '–í—Ö–æ–¥...' : '–í–æ–π—Ç–∏'}
    </button>
  );
}

function RegisterButton() {
  const { pending } = useFormStatus();
  return (
    <button type="submit" disabled={pending}>
      {pending ? '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...' : '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è'}
    </button>
  );
}

function Page() {
  return (
    <div>
      <form action={loginAction}>
        <input name="email" />
        <LoginButton /> {/* ‚úÖ –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ */}
      </form>

      <form action={registerAction}>
        <input name="name" />
        <RegisterButton />
      </form>
    </div>
  );
}
```

### 8. ‚ùå –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ method

```javascript
// ‚ùå –ü–õ–û–•–û: –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º method
function FormDebug() {
  const { pending, data } = useFormStatus();
  // ‚ùå method –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞

  return pending ? <div>–û—Ç–ø—Ä–∞–≤–∫–∞...</div> : null;
}

// ‚úÖ –•–û–†–û–®–û: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
function FormDebug() {
  const { pending, data, method, action } = useFormStatus();

  if (!pending) return null;

  return (
    <div className="debug">
      <p>–ú–µ—Ç–æ–¥: {method}</p>
      <p>Action: {typeof action === 'function' ? 'Server Action' : action}</p>
      <p>–î–∞–Ω–Ω—ã–µ: {data ? Array.from(data.keys()).join(', ') : 'none'}</p>
    </div>
  );
}
```

### 9. ‚ùå –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã

```javascript
// ‚ùå –ü–õ–û–•–û: –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã (–Ω–µ–≤–∞–ª–∏–¥–Ω–æ!)
function Page() {
  return (
    <form action={outerAction}>
      <input name="outer" />

      <form action={innerAction}> {/* ‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π HTML! */}
        <input name="inner" />
        <SubmitButton /> {/* –ö–∞–∫—É—é —Ñ–æ—Ä–º—É –æ—Ç–ø—Ä–∞–≤–∏—Ç? */}
      </form>

      <SubmitButton />
    </form>
  );
}

// ‚úÖ –•–û–†–û–®–û: –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã
function Page() {
  return (
    <div>
      <form action={firstAction}>
        <input name="first" />
        <FirstSubmitButton />
      </form>

      <form action={secondAction}>
        <input name="second" />
        <SecondSubmitButton />
      </form>
    </div>
  );
}
```

### 10. ‚ùå –ù–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –±–µ–∑ Server Actions

```javascript
// ‚ùå –ü–õ–û–•–û: –Ω–µ—Ç —Ñ–æ–ª–±—ç–∫–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ä–µ–¥—ã
function SubmitButton() {
  const { pending } = useFormStatus();
  // ‚ùå pending –≤—Å–µ–≥–¥–∞ false –±–µ–∑ Server Actions

  return <button type="submit" disabled={pending}>Submit</button>;
}

// ‚úÖ –•–û–†–û–®–û: Context –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –≤ dev
const FormStatusContext = createContext({ pending: false });

function useFormStatusWithFallback() {
  // –ü—ã—Ç–∞–µ–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–π useFormStatus
  try {
    return useFormStatus();
  } catch {
    // –§–æ–ª–±—ç–∫ –Ω–∞ Context –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    return useContext(FormStatusContext);
  }
}

function SubmitButton() {
  const { pending } = useFormStatusWithFallback();
  return <button type="submit" disabled={pending}>Submit</button>;
}

// –û–±—ë—Ä—Ç–∫–∞ —Ñ–æ—Ä–º—ã –¥–ª—è dev-—Ä–µ–∂–∏–º–∞
function DevForm({ children, action }) {
  const [state, formAction, isPending] = useActionState(action, {});

  return (
    <FormStatusContext.Provider value={{ pending: isPending }}>
      <form action={formAction}>
        {children}
      </form>
    </FormStatusContext.Provider>
  );
}
```

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üéØ –¢–æ–ª—å–∫–æ –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** ‚Äî –Ω–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–æ—Ä–º—ã
2. **üîß –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–Ω–æ–ø–∫–∏** ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
3. **üìö –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fieldset** ‚Äî –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å—Ä–∞–∑—É
4. **üöÄ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ pending –≤–∏–∑—É–∞–ª—å–Ω–æ
5. **‚ö° –° Server Actions** ‚Äî –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ RSC
6. **üé® –†–∞–∑–Ω—ã–µ –∫–Ω–æ–ø–∫–∏** ‚Äî —Ä–∞–∑–¥–µ–ª—è–π—Ç–µ –ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º

> üîÑ useFormStatus –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–æ—Ä–º—ã –ø—Ä–æ—â–µ!

---

**üéâ –¢–µ–ø–µ—Ä—å –≤—ã –æ—Å–≤–æ–∏–ª–∏ –≤—Å–µ 15 —Ö—É–∫–æ–≤ React 19 –∏ –≥–æ—Ç–æ–≤—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!**

