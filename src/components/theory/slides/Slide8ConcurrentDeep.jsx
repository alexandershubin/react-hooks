import { useState } from 'react'

// –°–ª–∞–π–¥ 8: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Concurrent Rendering
function Slide8ConcurrentDeep() {
  const [activeStep, setActiveStep] = useState(0)

  const steps = [
    {
      title: 'üéØ –ü—Ä–æ–±–ª–µ–º–∞: –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥',
      description: '–í React 17 –∏ —Ä–∞–Ω–µ–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –±—ã–ª —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∏ –±–ª–æ–∫–∏—Ä—É—é—â–∏–º',
      content: `–ö–æ–≥–¥–∞ React –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ–Ω –î–û–õ–ñ–ï–ù –∑–∞–∫–æ–Ω—á–∏—Ç—å –≤—Å—é —Ä–∞–±–æ—Ç—É –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –±—Ä–∞—É–∑–µ—Ä —Å–º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —ç–∫—Ä–∞–Ω.

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç –≤ –∏–Ω–ø—É—Ç ‚Üí setState –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
2. React –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. –ï—Å–ª–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–µ–¥–ª–µ–Ω–Ω—ã–π (–±–æ–ª—å—à–æ–π —Å–ø–∏—Å–æ–∫) - –±—Ä–∞—É–∑–µ—Ä "–∑–∞–≤–∏—Å–∞–µ—Ç"
4. UI –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä–∞ –±—Ä–∞—É–∑–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç —ç–∫—Ä–∞–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç "–ø–æ–¥–≤–∏—Å–∞–Ω–∏–µ" –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞`,
      code: `// React 17 - –≤—Å—ë –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
function SearchPage() {
  const [query, setQuery] = useState('')
  const [results, setResults] = useState([])

  const handleChange = (e) => {
    setQuery(e.target.value)
    // –≠—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–µ—Å—å UI! ‚ùå
    const filtered = hugeList.filter(item =>
      item.includes(e.target.value)
    )
    setResults(filtered) // –ú–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 500–º—Å!
  }

  return (
    <>
      <input value={query} onChange={handleChange} />
      {/* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç —Å–≤–æ–π –≤–≤–æ–¥
          –ø–æ–∫–∞ –Ω–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è results! */}
      <ResultsList items={results} /> {/* 10000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */}
    </>
  )
}`
    },
    {
      title: '‚ö° –†–µ—à–µ–Ω–∏–µ: Concurrent Rendering',
      description: 'React –º–æ–∂–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥',
      content: `Concurrent Rendering –ø–æ–∑–≤–æ–ª—è–µ—Ç React —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. React —Ä–µ–Ω–¥–µ—Ä–∏—Ç –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ –±–ª–æ–∫–∏—Ä—É—è –±—Ä–∞—É–∑–µ—Ä)
2. React –º–æ–∂–µ—Ç "–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è" –∏ –æ—Ç–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä—É
3. –ë—Ä–∞—É–∑–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. React –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å —Ç–æ–≥–æ –∂–µ –º–µ—Å—Ç–∞

**–ú–∞–≥–∏—è:** React –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Time Slicing - —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ –∫—É—Å–æ—á–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏—Ö –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (60 FPS = ~16–º—Å –Ω–∞ –∫–∞–¥—Ä)`,
      code: `// React 18 - —Ä–∞–±–æ—Ç–∞ —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ —á–∞—Å—Ç–∏
function Frame1() {
  // React —Ä–µ–Ω–¥–µ—Ä–∏—Ç –ø–µ—Ä–≤—ã–µ 100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  render(items[0...100])
}

function Frame2() {
  // –ë—Ä–∞—É–∑–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç —ç–∫—Ä–∞–Ω
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–∫–∏/–≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
}

function Frame3() {
  // React –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å
  render(items[100...200])
}

// –¶–∏–∫–ª –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ø–æ–∫–∞ –≤—Å—ë –Ω–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
// –ù–û: UI –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∑—ã–≤—á–∏–≤—ã–º! ‚úÖ`
    },
    {
      title: 'üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π',
      description: 'React —Ä–∞–∑–ª–∏—á–∞–µ—Ç —Å—Ä–æ—á–Ω—ã–µ –∏ –Ω–µ—Å—Ä–æ—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è',
      content: `React 18 –≤–≤–æ–¥–∏—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:

**–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Å—Ä–æ—á–Ω—ã–µ):**
‚Ä¢ –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤ –∏–Ω–ø—É—Ç
‚Ä¢ –ö–ª–∏–∫–∏ –ø–æ –∫–Ω–æ–ø–∫–∞–º
‚Ä¢ –°–∫—Ä–æ–ª–ª–∏–Ω–≥
‚Ä¢ –ê–Ω–∏–º–∞—Ü–∏–∏
‚Üí –î–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!

**–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–Ω–µ—Å—Ä–æ—á–Ω—ã–µ):**
‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚Ä¢ –§–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
‚Ä¢ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚Üí –ú–æ–≥—É—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å

**–ú–µ—Ö–∞–Ω–∏–∑–º:** React –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –æ—á–µ—Ä–µ–¥—å —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ (Scheduler)`,
      code: `// –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ö–∞–Ω–∏–∑–º (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
const priorityQueue = {
  immediate: [], // –°—Ä–æ—á–Ω—ã–µ (–∫–ª–∏–∫–∏, –≤–≤–æ–¥)
  normal: [],    // –û–±—ã—á–Ω—ã–µ
  low: [],       // –ù–∏–∑–∫–∏–µ (transitions)
}

function scheduleUpdate(update, priority) {
  priorityQueue[priority].push(update)

  if (priority === 'immediate') {
    // –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!
    performWork(update)
  } else {
    // –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—Ä–µ–º—è
    requestIdleCallback(() => performWork(update))
  }
}`
    },
    {
      title: 'üîÄ useTransition: –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç',
      description: '–ü–æ–º–µ—á–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∫ –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ',
      content: `useTransition –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç [isPending, startTransition]

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏:**

1. –í—ã–∑—ã–≤–∞–µ—Ç–µ startTransition(() => setState(...))
2. React –ø–æ–º–µ—á–∞–µ—Ç —ç—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∫ "transition" (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
3. React –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≤ —Ñ–æ–Ω–µ
4. –ï—Å–ª–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å—Ä–æ—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ - React –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç transition
5. –ü–æ—Å–ª–µ —Å—Ä–æ—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è - –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç transition
6. isPending = true –ø–æ–∫–∞ transition –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

**–í–∞–∂–Ω–æ:** Transition –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ—Ä–≤–∞–Ω –∏ –¥–∞–∂–µ –æ—Ç–º–µ–Ω—ë–Ω!`,
      code: `function SearchPage() {
  const [query, setQuery] = useState('')
  const [results, setResults] = useState([])
  const [isPending, startTransition] = useTransition()

  const handleChange = (e) => {
    // –°—Ä–æ—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    setQuery(e.target.value) // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ! ‚ö°

    // –ù–µ—Å—Ä–æ—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    startTransition(() => {
      const filtered = hugeList.filter(item =>
        item.includes(e.target.value)
      )
      setResults(filtered) // –ú–æ–∂–µ—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å
    })
  }

  return (
    <>
      <input value={query} onChange={handleChange} />
      {isPending && <Spinner />} {/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É */}
      <ResultsList items={results} />
    </>
  )
}

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// ‚úÖ –ò–Ω–ø—É—Ç –æ—Ç–∑—ã–≤—á–∏–≤—ã–π (query –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
// ‚úÖ –°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ
// ‚úÖ UI –Ω–µ –∑–∞–≤–∏—Å–∞–µ—Ç!`
    },
    {
      title: 'üß† –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º: Fiber –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞',
      description: '–ö–∞–∫ React —Ö—Ä–∞–Ω–∏—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è',
      content: `React –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö "Fiber" - —ç—Ç–æ –µ–¥–∏–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç—ã.

**–ß—Ç–æ —Ç–∞–∫–æ–µ Fiber:**
‚Ä¢ –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω Fiber —É–∑–ª–æ–º
‚Ä¢ Fiber —Ö—Ä–∞–Ω–∏—Ç: props, state, effects, priority
‚Ä¢ Fiber'—ã —Å–≤—è–∑–∞–Ω—ã –≤ –¥–µ—Ä–µ–≤–æ (parent, child, sibling)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:**
1. React —Å–æ–∑–¥–∞—ë—Ç "work-in-progress" –¥–µ—Ä–µ–≤–æ (–∫–æ–ø–∏—è —Ç–µ–∫—É—â–µ–≥–æ)
2. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ –æ–¥–Ω–æ–º—É Fiber –∑–∞ —Ä–∞–∑
3. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ Fiber - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: "–µ—Å—Ç—å –ª–∏ —Å—Ä–æ—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞?"
4. –ï—Å–ª–∏ –¥–∞ - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ä–æ—á–Ω–æ–µ
5. –ü–æ—Ç–æ–º –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å —Ç–æ–≥–æ –∂–µ –º–µ—Å—Ç–∞

**Time Slicing:** React —Ä–∞–±–æ—Ç–∞–µ—Ç ~5–º—Å, –ø–æ—Ç–æ–º –æ—Ç–¥–∞—ë—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä—É`,
      code: `// –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Fiber
const fiber = {
  type: Component,        // –¢–∏–ø –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  props: { name: 'John' },
  state: { count: 0 },

  // –°–≤—è–∑–∏ –≤ –¥–µ—Ä–µ–≤–µ
  parent: parentFiber,
  child: childFiber,
  sibling: siblingFiber,

  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
  lanes: 0b0001, // –ë–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

  // –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  effectTag: 'Update',

  // –°—Å—ã–ª–∫–∞ –Ω–∞ DOM
  stateNode: divElement
}

// –¶–∏–∫–ª —Ä–∞–±–æ—Ç—ã (workLoop)
function workLoop(deadline) {
  while (nextUnitOfWork && deadline.timeRemaining() > 1) {
    nextUnitOfWork = performUnitOfWork(nextUnitOfWork)
  }

  if (nextUnitOfWork) {
    // –ï—Å—Ç—å –µ—â—ë —Ä–∞–±–æ—Ç–∞ - –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∫–∞–¥—Ä
    requestIdleCallback(workLoop)
  } else {
    // –í—Å—ë –≥–æ—Ç–æ–≤–æ - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫ DOM
    commitRoot()
  }
}`
    },
    {
      title: 'üéõÔ∏è –ö—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç Concurrent?',
      description: '–ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞ vs –í–∞—à –∫–æ–Ω—Ç—Ä–æ–ª—å',
      content: `**Concurrent Rendering —Ä–∞–±–æ—Ç–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–¥ –≤–∞—à–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º:**

**–ß—Ç–æ React –¥–µ–ª–∞–µ—Ç –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò:**
‚Ä¢ Automatic Batching - –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚Ä¢ Time Slicing - —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ ~5–º—Å
‚Ä¢ Fiber Architecture - –≤—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –º–µ—Ö–∞–Ω–∏–∫–∞
‚Ä¢ Scheduler - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

**–ß—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç–µ –í–´:**
‚Ä¢ useTransition - –ø–æ–º–µ—á–∞–µ—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∫ –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ
‚Ä¢ useDeferredValue - –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
‚Ä¢ Suspense - —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π

**–í–∞–∂–Ω–æ:** –ë–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–∏—Ö —Ö—É–∫–æ–≤ React –≤—Å—ë —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Concurrent Rendering, –Ω–æ –≤—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±—É–¥—É—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞!`,
      code: `// 1Ô∏è‚É£ useTransition - –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
const [isPending, startTransition] = useTransition()

setQuery(value) // ‚úÖ –°—Ä–æ—á–Ω–æ–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

startTransition(() => {
  setResults(heavy()) // ‚úÖ –ù–µ—Å—Ä–æ—á–Ω–æ–µ (–í–´ —Ä–µ—à–∞–µ—Ç–µ)
})

// 2Ô∏è‚É£ useDeferredValue - –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
const [query, setQuery] = useState('')
const deferredQuery = useDeferredValue(query)
// query - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
// deferredQuery - —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

// 3Ô∏è‚É£ Suspense - –∫–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–≥—Ä—É–∑–∫–∏
<Suspense fallback={<Spinner />}>
  <AsyncComponent /> {/* React —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫–æ–π */}
</Suspense>

// –ë–ï–ó —ç—Ç–∏—Ö —Ö—É–∫–æ–≤:
// React –≤—Å—ë —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Concurrent,
// –Ω–æ –ù–ï –∑–Ω–∞–µ—Ç –∫–∞–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–∞–∂–Ω–µ–µ!`
    },
    {
      title: 'üé® Practical Example',
      description: '–ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏',
      content: `–†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: –ø–æ–∏—Å–∫ –≤ –±–æ–ª—å—à–æ–º —Å–ø–∏—Å–∫–µ —Å –æ—Ç–∑—ã–≤—á–∏–≤—ã–º UI`,
      code: `function ProductSearch() {
  const [query, setQuery] = useState('')
  const [filteredProducts, setFilteredProducts] = useState(products)
  const [isPending, startTransition] = useTransition()

  const handleSearch = (e) => {
    const value = e.target.value

    // –®–ê–ì 1: –°—Ä–æ—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    // React –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–æ –ù–ï–ú–ï–î–õ–ï–ù–ù–û
    setQuery(value)
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–π –≤–≤–æ–¥ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ! ‚ö°

    // –®–ê–ì 2: –ù–µ—Å—Ä–æ—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    startTransition(() => {
      // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –≤ —Ñ–æ–Ω–µ
      // React –º–æ–∂–µ—Ç –µ—ë –ø—Ä–µ—Ä–≤–∞—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

      const filtered = products.filter(product =>
        product.name.toLowerCase().includes(value.toLowerCase())
      )
      // –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç 300–º—Å –¥–ª—è 10000 —Ç–æ–≤–∞—Ä–æ–≤

      setFilteredProducts(filtered)
      // React –ø—Ä–∏–º–µ–Ω–∏—Ç —ç—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–≥–¥–∞ —Å–º–æ–∂–µ—Ç
    })

    // isPending –±—É–¥–µ—Ç true –ø–æ–∫–∞ transition –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
  }

  return (
    <div>
      <input
        value={query}
        onChange={handleSearch}
        placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..."
        // ‚úÖ –ò–Ω–ø—É—Ç –≤—Å–µ–≥–¥–∞ –æ—Ç–∑—ã–≤—á–∏–≤—ã–π!
      />

      {isPending && (
        <div>üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤...</div>
      )}

      <ProductList products={filteredProducts} />
      {/* –°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–ª–∞–≤–Ω–æ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è UI */}
    </div>
  )
}

// –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ timeline:
// 0ms   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç "a"
// 1ms   - setQuery('a') –≤—ã–ø–æ–ª–Ω–µ–Ω, —ç–∫—Ä–∞–Ω –æ–±–Ω–æ–≤–ª—ë–Ω ‚úÖ
// 2ms   - startTransition –Ω–∞—á–∏–Ω–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
// 50ms  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç "ab"
// 51ms  - setQuery('ab') –≤—ã–ø–æ–ª–Ω–µ–Ω (–ø—Ä–µ—Ä—ã–≤–∞–µ—Ç transition) ‚úÖ
// 52ms  - –°—Ç–∞—Ä–∞—è transition –æ—Ç–º–µ–Ω–µ–Ω–∞, –Ω–æ–≤–∞—è –Ω–∞—á–∞—Ç–∞
// 352ms - –ù–æ–≤–∞—è transition –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Å–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—ë–Ω ‚úÖ`
    }
  ]

  return (
    <div style={{ padding: '40px', maxWidth: '1200px', margin: '0 auto' }}>
      <h1 style={{
        fontSize: '3em',
        textAlign: 'center',
        color: '#61dafb',
        marginBottom: '40px'
      }}>
        ‚ö° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Concurrent Rendering
      </h1>

      {/* –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —à–∞–≥–∞–º */}
      <div style={{
        display: 'flex',
        gap: '10px',
        marginBottom: '30px',
        flexWrap: 'wrap',
        justifyContent: 'center'
      }}>
        {steps.map((step, idx) => (
          <button
            key={idx}
            onClick={() => setActiveStep(idx)}
            style={{
              padding: '12px 20px',
              fontSize: '0.9em',
              backgroundColor: activeStep === idx ? '#2196f3' : '#f5f5f5',
              color: activeStep === idx ? 'white' : '#333',
              border: `2px solid ${activeStep === idx ? '#2196f3' : '#ddd'}`,
              borderRadius: '8px',
              cursor: 'pointer',
              fontWeight: activeStep === idx ? 'bold' : 'normal',
              transition: 'all 0.3s ease',
              flex: '1 1 200px'
            }}
          >
            –®–∞–≥ {idx + 1}
          </button>
        ))}
      </div>

      {/* –¢–µ–∫—É—â–∏–π —à–∞–≥ */}
      <div style={{
        background: 'white',
        border: '3px solid #2196f3',
        borderRadius: '20px',
        padding: '30px',
        boxShadow: '0 8px 24px rgba(0,0,0,0.15)'
      }}>
        <h2 style={{
          color: '#2196f3',
          marginTop: 0,
          fontSize: '2em',
          marginBottom: '10px'
        }}>
          {steps[activeStep].title}
        </h2>

        <p style={{
          fontSize: '1.2em',
          color: '#666',
          fontStyle: 'italic',
          marginBottom: '20px'
        }}>
          {steps[activeStep].description}
        </p>

        <div style={{
          fontSize: '1.1em',
          lineHeight: '1.8',
          whiteSpace: 'pre-line',
          marginBottom: '20px'
        }}>
          {steps[activeStep].content}
        </div>

        {steps[activeStep].code && (
          <>
            <h3 style={{ color: '#2196f3', fontSize: '1.4em' }}>
              üíª –ö–æ–¥:
            </h3>
            <pre style={{
              background: '#263238',
              color: '#aed581',
              padding: '20px',
              borderRadius: '10px',
              fontSize: '0.9em',
              overflow: 'auto',
              lineHeight: '1.6',
              margin: 0
            }}>
              {steps[activeStep].code}
            </pre>
          </>
        )}
      </div>

      {/* –ü—Ä–æ–≥—Ä–µ—Å—Å */}
      <div style={{
        marginTop: '30px',
        textAlign: 'center',
        color: '#666',
        fontSize: '1.1em'
      }}>
        –®–∞–≥ {activeStep + 1} –∏–∑ {steps.length}
      </div>
    </div>
  )
}

export default Slide8ConcurrentDeep